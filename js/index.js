(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function renderWordCloudCoverImage(){function drawWordCloud(options){var canvas=document.getElementById("wordcloud");return canvas?(options=options||{list:[]},"string"==typeof options&&(options=eval("options="+options.trim())),canvas.addEventListener("wordclouddrawn",onWordCloudDrawn),canvas.addEventListener("wordcloudstart",onWordCloudStart),canvas.addEventListener("wordcloudstop",onWordCloudStop),canvas.addEventListener("wordcloudabort",onWordCloudAbort),void window.WordCloud(canvas,options)):void console.error("No canvas found")}function onWordCloudDrawn(o){}function onWordCloudStart(o){}function onWordCloudAbort(o){}function onWordCloudStop(o){var e=document.getElementById("wordcloud"),a=e.getContext("2d"),t=document.querySelector(".main-header");if(t&&a&&"function"==typeof a.createRadialGradient){var n=e.width,r=e.height,i=a.createRadialGradient(.5*n,.5*r,.1*r,.5*n,.5*r,.5*n);i.addColorStop(0,"rgba(240,0,0,0.5)"),i.addColorStop(.2,"rgba(240,0,0,0.4)"),i.addColorStop(.7,"rgba(240,0,0,0.1)"),i.addColorStop(1,"rgba(0,  0,0,0.3)"),a.fillStyle=i,a.fillRect(0,0,n,r);var d=e.toDataURL("image/png");t.style["background-image"]="url("+d+")"}}if(window.WordCloud)if(window.WordCloud.isSupported){var canvas=document.getElementById("wordcloud");canvas.width=window.wordcloudConfig.canvasWidth,canvas.height=window.wordcloudConfig.canvasHeight;var width=canvas.width;drawWordCloud({gridSize:Math.round(8*width/1024),weightFactor:function(o){return 16*Math.pow(o,1.15)*width/1024},fontFamily:"Roboto, sans-serif",color:function(o,e){return"hsl("+(20*Math.random()+5).toFixed()+","+(20*Math.random()+(50-Math.pow(e,2))).toFixed()+"%,"+(20*Math.random()+(50-Math.pow(e,2))).toFixed()+"%)"},rotateRatio:.75,backgroundColor:"#481818",list:getWordList()})}else console.error("Word cloud not supported");else console.error("No word cloud library")}function getWordList(){return[["Lah!",6],["Leh!",5],["Lor!",5],["Meh?",5],["walao eh",4],["huat ah",1],["bo pian",1],["stupiak",1],["blur like sotong",1],["referee kayu",1],["ah bo den",1],["arbuthen",2],["ok ah",1],["tekan",1],["hantam",1],["corright",1],["talk cock",3],["can or not",1],["buay tahan",3],["jia lat",1],["go where",1],["stylo milo",3],["alamak",2],["kanasai",1],["bo liao",1],["cockanathan",1],["steady steady",1],["bom pipi",1],["powderful",1],["rilak one korner",2],["chope",1],["hentak kaki",1],["langgar",1],["gabra",1],["kilat",1],["kaypoh",2],["anyhow whack",2],["spoil market",1],["chao keng",1],["siol ah",1],["got meh",1],["horlan liao",1],["habis lah",1],["kena hantam",1],["kena sai",1],["kena arrowed",1],["heng ah",1],["heck care lah",1],["guai lan",1],["kao pei kao bu",1],["pai seh",1],["kancheong spider",1],["lolek uncer",1],["gold chain uncer",1],["grandfather road",1],["kopitiam",1],["fly kite",2],["oso can",1],["cock eye",1],["angkat bola",1],["balik kampong",1],["kiasu",1],["kiasi",1],["referee kayu",1],["kelong",1],["saboh king",1],["wayang king",1],["paotoh king",1],["pangseh king",1],["pontang king",1],["drama queen",1],["cannot make it",1],["goondu",1],["confirm plus chop",2],["eskew me",2],["karang guni",1],["pakat pakat ah",1],["shag liao",1],["don’ch pray pray",1],["ya ya papaya",1],["song song gao Jurong",1],["huat ah!",2],["simi taiji",1],["neh neh pok",1],["itchy backside",1],["agaration",1],["sia la",1],["lepak",1],["yum seng!",1],["zhun zhun",1],["win liao lor",1],["cheem",1],["powderful siol",1],["I clap for you",1],["barang barang",1],["curry pok",1],["swee ah",1],["bo chup",2]]}function doAnalytics(){function o(){p&&clearTimeout(p),p=setTimeout(e,h)}function e(){var o=$(window).height()+$(window).scrollTop(),e=$(document).height();if(!k&&o>g&&(t=(new Date).getTime(),n=Math.round((t-w)/1e3),m=n,s("send","event","Reading","PageStart","",n),k=!0),b&&!v){var h=b.getBoundingClientRect(),p=h.top+document.body.scrollTop,C=p+h.height;o>C?(d=(new Date).getTime(),c=Math.round((d-w)/1e3),m=c,s("send","event","Reading","ContentEnd","",c),a(),v=!0):!f&&o>p+.5*h.height&&(r=(new Date).getTime(),i=Math.round((r-w)/1e3),m=i,s("send","event","Reading","ContentMidway","",i),f=!0)}!y&&o>=e&&(l=(new Date).getTime(),u=Math.round((l-w)/1e3),m=u,s("send","event","Reading","PageEnd","",u),a(),y=!0)}function a(){var o;o=60>m?"Skim":"Thorough",s("set","dimension1",o)}var t,n,r,i,d,c,l,u,s,h=150,g=150,p=0,w=(new Date).getTime(),m=0,k=!1,f=!1,v=!1,y=!1;switch(document.location.hostname){case"localhost":case"127.0.0.1":case"0.0.0.0":s=function(){console.log(arguments)};break;default:s=window.ga}var b=document.querySelector(".post-content");b=b||document.querySelector(".content"),s("send","event","Reading","PageLoadedTime","",Math.round(w/1e3)),$(window).scroll(o)}function doShareDynamic(){function o(o){var e=encodeURIComponent(o.input.value);o.twitter.href="https://twitter.com/share?status="+e,o.facebook.href="https://www.facebook.com/sharer/sharer.php?u="+a,o.pinterest.href="http://pinterest.com/pin/create/button/?url="+a+"{{ if .Params.pinterestmedia }}&amp;media="+t+"&amp;description="+e,o.googleplus.href="https://plus.google.com/share?url="+a}var e=document.querySelectorAll(".share-dynamic");if(e&&!(e.length<1)){var a=encodeURIComponent(window.location.href),t=encodeURIComponent("http://shirtlah.com/images/shirtlah-logo-300x300.png");e.forEach(function(e){var a=e.querySelector(".input"),t={input:a,twitter:e.querySelector(".twitter"),facebook:e.querySelector(".facebook"),pinterest:e.querySelector(".pinterest"),googleplus:e.querySelector(".googleplus")};o(t),a.addEventListener("input",o.bind(void 0,t))})}}jQuery(function(o){doAnalytics(),doShareDynamic(),renderWordCloudCoverImage()});

},{}],2:[function(require,module,exports){
require("./wordcloud2.js"),require("./code.js");

},{"./code.js":1,"./wordcloud2.js":3}],3:[function(require,module,exports){
"use strict";window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var t=[void 0],e="zero-timeout-message",r=function(r){var a=t.length;return t.push(r),window.postMessage(e+a.toString(36),"*"),a};return window.addEventListener("message",function(r){if("string"==typeof r.data&&r.data.substr(0,e.length)===e){r.stopImmediatePropagation();var a=parseInt(r.data.substr(e.length),36);t[a]&&(t[a](),t[a]=void 0)}},!0),window.clearImmediate=function(e){t[e]&&(t[e]=void 0)},r}()||function(t){window.setTimeout(t,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)}}()),function(t){var e=function(){var t=document.createElement("canvas");if(!t||!t.getContext)return!1;var e=t.getContext("2d");return e.getImageData&&e.fillText&&Array.prototype.some&&Array.prototype.push?!0:!1}(),r=function(){if(e){for(var t,r,a=document.createElement("canvas").getContext("2d"),i=20;i;){if(a.font=i.toString(10)+"px sans-serif",a.measureText("Ｗ").width===t&&a.measureText("m").width===r)return i+1;t=a.measureText("Ｗ").width,r=a.measureText("m").width,i--}return 0}}(),a=function(t){for(var e,r,a=t.length;a;e=Math.floor(Math.random()*a),r=t[--a],t[a]=t[e],t[e]=r);return t},i=function(t,i){function o(t,e){return"hsl("+(360*Math.random()).toFixed()+","+(30*Math.random()+70).toFixed()+"%,"+(Math.random()*(e-t)+t).toFixed()+"%)"}if(e){Array.isArray(t)||(t=[t]),t.forEach(function(e,r){if("string"==typeof e){if(t[r]=document.getElementById(e),!t[r])throw"The element id specified is not found."}else if(!e.tagName&&!e.appendChild)throw"You must pass valid HTML elements, or ID of the element."});var n={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,hover:null,click:null};if(i)for(var f in i)f in n&&(n[f]=i[f]);if("function"!=typeof n.weightFactor){var l=n.weightFactor;n.weightFactor=function(t){return t*l}}if("function"!=typeof n.shape)switch(n.shape){case"circle":default:n.shape="circle";break;case"cardioid":n.shape=function(t){return 1-Math.sin(t)};break;case"diamond":case"square":n.shape=function(t){var e=t%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))};break;case"triangle-forward":n.shape=function(t){var e=t%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"triangle":case"triangle-upright":n.shape=function(t){var e=(t+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"pentagon":n.shape=function(t){var e=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(e)+.726543*Math.sin(e))};break;case"star":n.shape=function(t){var e=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-e)+3.07768*Math.sin(2*Math.PI/10-e)):1/(Math.cos(e)+3.07768*Math.sin(e))}}n.gridSize=Math.max(Math.floor(n.gridSize),4);var s,d,c,u,h,m,v,w=n.gridSize,g=w-n.maskGapWidth,p=Math.abs(n.maxRotation-n.minRotation),M=Math.min(n.maxRotation,n.minRotation);switch(n.color){case"random-dark":v=function(){return o(10,50)};break;case"random-light":v=function(){return o(50,90)};break;default:"function"==typeof n.color&&(v=n.color)}var x,b=!1,C=[],I=function(t){var e=t.currentTarget,r=e.getBoundingClientRect(),a=t.clientX-r.left,i=t.clientY-r.top,o=Math.floor(a*(e.width/r.width||1)/w),n=Math.floor(i*(e.height/r.height||1)/w);return C[o][n]},T=function(t){var e=I(t);if(x!==e)return x=e,e?void n.hover(e.item,e.dimension,t):void n.hover(void 0,void 0,t)},y=function(t){var e=I(t);e&&n.click(e.item,e.dimension,t)},k=[],S=function(t){if(k[t])return k[t];var e=8*t,r=e,a=[];for(0===t&&a.push([u[0],u[1],0]);r--;){var i=1;"circle"!==n.shape&&(i=n.shape(r/e*2*Math.PI)),a.push([u[0]+t*i*Math.cos(-r/e*2*Math.PI),u[1]+t*i*Math.sin(-r/e*2*Math.PI)*n.ellipticity,r/e*2*Math.PI])}return k[t]=a,a},E=function(){return n.abortThreshold>0&&(new Date).getTime()-m>n.abortThreshold},R=function(){return 0===n.rotateRatio?0:Math.random()>n.rotateRatio?0:0===p?M:M+Math.random()*p},P=function(t,e,a){var i=!1,o=n.weightFactor(e);if(o<=n.minSize)return!1;var f=1;r>o&&(f=function(){for(var t=2;r>t*o;)t+=2;return t}());var l=document.createElement("canvas"),s=l.getContext("2d",{willReadFrequently:!0});s.font=n.fontWeight+" "+(o*f).toString(10)+"px "+n.fontFamily;var d=s.measureText(t).width/f,c=Math.max(o*f,s.measureText("m").width,s.measureText("Ｗ").width)/f,u=d+2*c,h=3*c,m=Math.ceil(u/w),v=Math.ceil(h/w);u=m*w,h=v*w;var g=-d/2,p=.4*-c,M=Math.ceil((u*Math.abs(Math.sin(a))+h*Math.abs(Math.cos(a)))/w),x=Math.ceil((u*Math.abs(Math.cos(a))+h*Math.abs(Math.sin(a)))/w),b=x*w,C=M*w;l.setAttribute("width",b),l.setAttribute("height",C),i&&(document.body.appendChild(l),s.save()),s.scale(1/f,1/f),s.translate(b*f/2,C*f/2),s.rotate(-a),s.font=n.fontWeight+" "+(o*f).toString(10)+"px "+n.fontFamily,s.fillStyle="#000",s.textBaseline="middle",s.fillText(t,g*f,(p+.5*o)*f);var I=s.getImageData(0,0,b,C).data;if(E())return!1;i&&(s.strokeRect(g*f,p,d*f,c*f),s.restore());for(var T,y,k,S=[],R=x,P=[M/2,x/2,M/2,x/2];R--;)for(T=M;T--;){k=w;t:{for(;k--;)for(y=w;y--;)if(I[4*((T*w+k)*b+(R*w+y))+3]){S.push([R,T]),R<P[3]&&(P[3]=R),R>P[1]&&(P[1]=R),T<P[0]&&(P[0]=T),T>P[2]&&(P[2]=T),i&&(s.fillStyle="rgba(255, 0, 0, 0.5)",s.fillRect(R*w,T*w,w-.5,w-.5));break t}i&&(s.fillStyle="rgba(0, 0, 255, 0.5)",s.fillRect(R*w,T*w,w-.5,w-.5))}}return i&&(s.fillStyle="rgba(0, 255, 0, 0.5)",s.fillRect(P[3]*w,P[0]*w,(P[1]-P[3]+1)*w,(P[2]-P[0]+1)*w)),{mu:f,occupied:S,bounds:P,gw:x,gh:M,fillTextOffsetX:g,fillTextOffsetY:p,fillTextWidth:d,fillTextHeight:c,fontSize:o}},F=function(t,e,r,a,i){for(var o=i.length;o--;){var n=t+i[o][0],f=e+i[o][1];if(n>=d||f>=c||0>n||0>f||!s[n][f])return!1}return!0},z=function(e,r,a,i,o,f,l,s,d){var c,u=a.fontSize;c=v?v(i,o,u,f,l):n.color;var h,m=a.bounds;h={x:(e+m[3])*w,y:(r+m[0])*w,w:(m[1]-m[3]+1)*w,h:(m[2]-m[0]+1)*w},t.forEach(function(t){if(t.getContext){var o=t.getContext("2d"),f=a.mu;o.save(),o.scale(1/f,1/f),o.font=n.fontWeight+" "+(u*f).toString(10)+"px "+n.fontFamily,o.fillStyle=c,o.translate((e+a.gw/2)*w*f,(r+a.gh/2)*w*f),0!==s&&o.rotate(-s),o.textBaseline="middle",o.fillText(i,a.fillTextOffsetX*f,(a.fillTextOffsetY+.5*u)*f),o.restore()}else{var l=document.createElement("span"),h="";h="rotate("+-s/Math.PI*180+"deg) ",1!==a.mu&&(h+="translateX(-"+a.fillTextWidth/4+"px) scale("+1/a.mu+")");var m={position:"absolute",display:"block",font:n.fontWeight+" "+u*a.mu+"px "+n.fontFamily,left:(e+a.gw/2)*w+a.fillTextOffsetX+"px",top:(r+a.gh/2)*w+a.fillTextOffsetY+"px",width:a.fillTextWidth+"px",height:a.fillTextHeight+"px",color:c,lineHeight:u+"px",whiteSpace:"nowrap",transform:h,webkitTransform:h,msTransform:h,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};l.textContent=i;for(var v in m)l.style[v]=m[v];if(d)for(var g in d)l.setAttribute(g,d[g]);t.appendChild(l)}})},L=function(e,r,a,i,o){if(!(e>=d||r>=c||0>e||0>r)){if(s[e][r]=!1,a){var n=t[0].getContext("2d");n.fillRect(e*w,r*w,g,g)}b&&(C[e][r]={item:o,dimension:i})}},W=function(e,r,a,i,o,f){var l,s=o.occupied,d=n.drawMask;d&&(l=t[0].getContext("2d"),l.save(),l.fillStyle=n.maskColor);var c;if(b){var u=o.bounds;c={x:(e+u[3])*w,y:(r+u[0])*w,w:(u[1]-u[3]+1)*w,h:(u[2]-u[0]+1)*w}}for(var h=s.length;h--;)L(e+s[h][0],r+s[h][1],d,c,f);d&&l.restore()},A=function(t){var e,r,i;Array.isArray(t)?(e=t[0],r=t[1]):(e=t.word,r=t.weight,i=t.attributes);var o=R(),f=P(e,r,o);if(!f)return!1;if(E())return!1;var l=f.bounds;if(l[1]-l[3]+1>d||l[2]-l[0]+1>c)return!1;for(var s=h+1,u=function(a){var n=Math.floor(a[0]-f.gw/2),l=Math.floor(a[1]-f.gh/2),d=f.gw,c=f.gh;return F(n,l,d,c,f.occupied)?(z(n,l,f,e,r,h-s,a[2],o,i),W(n,l,d,c,f,t),!0):!1};s--;){var m=S(h-s);n.shuffle&&(m=[].concat(m),a(m));var v=m.some(u);if(v)return!0}return!1},O=function(e,r,a){return r?!t.some(function(t){var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!0,r,a||{}),!t.dispatchEvent(i)},this):void t.forEach(function(t){var i=document.createEvent("CustomEvent");i.initCustomEvent(e,!0,r,a||{}),t.dispatchEvent(i)},this)},D=function(){var e=t[0];if(e.getContext)d=Math.floor(e.width/w),c=Math.floor(e.height/w);else{var r=e.getBoundingClientRect();d=Math.floor(r.width/w),c=Math.floor(r.height/w)}if(O("wordcloudstart",!0)){u=n.origin?[n.origin[0]/w,n.origin[1]/w]:[d/2,c/2],h=Math.floor(Math.sqrt(d*d+c*c)),s=[];var a,i,o;if(!e.getContext||n.clearCanvas)for(t.forEach(function(t){if(t.getContext){var e=t.getContext("2d");e.fillStyle=n.backgroundColor,e.clearRect(0,0,d*(w+1),c*(w+1)),e.fillRect(0,0,d*(w+1),c*(w+1))}else t.textContent="",t.style.backgroundColor=n.backgroundColor}),a=d;a--;)for(s[a]=[],i=c;i--;)s[a][i]=!0;else{var f=document.createElement("canvas").getContext("2d");f.fillStyle=n.backgroundColor,f.fillRect(0,0,1,1);var l=f.getImageData(0,0,1,1).data,v=e.getContext("2d").getImageData(0,0,d*w,c*w).data;a=d;for(var g,p;a--;)for(s[a]=[],i=c;i--;){p=w;t:for(;p--;)for(g=w;g--;)for(o=4;o--;)if(v[4*((i*w+p)*d*w+(a*w+g))+o]!==l[o]){s[a][i]=!1;break t}s[a][i]!==!1&&(s[a][i]=!0)}v=f=l=void 0}if(n.hover||n.click){for(b=!0,a=d+1;a--;)C[a]=[];n.hover&&e.addEventListener("mousemove",T),n.click&&e.addEventListener("click",y),e.addEventListener("wordcloudstart",function F(){e.removeEventListener("wordcloudstart",F),e.removeEventListener("mousemove",T),e.removeEventListener("click",y),x=void 0})}o=0;var M,I;0!==n.wait?(M=window.setTimeout,I=window.clearTimeout):(M=window.setImmediate,I=window.clearImmediate);var k=function(e,r){t.forEach(function(t){t.addEventListener(e,r)},this)},S=function(e,r){t.forEach(function(t){t.removeEventListener(e,r)},this)},R=function z(){S("wordcloudstart",z),I(P)};k("wordcloudstart",R);var P=M(function L(){if(o>=n.list.length)return I(P),O("wordcloudstop",!1),void S("wordcloudstart",R);m=(new Date).getTime();var t=A(n.list[o]),e=!O("wordclouddrawn",!0,{item:n.list[o],drawn:t});return E()||e?(I(P),n.abort(),O("wordcloudabort",!1),O("wordcloudstop",!1),void S("wordcloudstart",R)):(o++,void(P=M(L,n.wait)))},n.wait)}};D()}};i.isSupported=e,i.miniumFontSize=r,"function"==typeof t.define&&t.define.amd?t.define("wordcloud",[],function(){return i}):"undefined"!=typeof t.module&&t.module.exports?t.module.exports=i:t.WordCloud=i}(window);

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvaG9tZS90cmF2aXMvZ29wYXRoL3NyYy9naXRodWIuY29tL2JndWl6L3NoaXJ0bGFoLmNvbS9zcmMvc3RhdGljLXByZXByb2Nlc3MvanMvY29kZS5qcyIsIi9ob21lL3RyYXZpcy9nb3BhdGgvc3JjL2dpdGh1Yi5jb20vYmd1aXovc2hpcnRsYWguY29tL3NyYy9zdGF0aWMtcHJlcHJvY2Vzcy9qcy9pbmRleC5qcyIsIi9ob21lL3RyYXZpcy9nb3BhdGgvc3JjL2dpdGh1Yi5jb20vYmd1aXovc2hpcnRsYWguY29tL3NyYy9zdGF0aWMtcHJlcHJvY2Vzcy9qcy93b3JkY2xvdWQyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsWUFFQSxTQUFTLDZCQThCUCxRQUFTLGVBQWMsU0FDckIsR0FBSSxRQUFTLFNBQVMsZUFBZSxZQUNyQyxPQUFLLFNBSUwsUUFBVSxVQUFhLFNBQ0EsZ0JBQVosV0FDVCxRQUFVLEtBQUssV0FBVyxRQUFRLFNBRXBDLE9BQU8saUJBQWlCLGlCQUFrQixrQkFDMUMsT0FBTyxpQkFBaUIsaUJBQWtCLGtCQUMxQyxPQUFPLGlCQUFpQixnQkFBaUIsaUJBQ3pDLE9BQU8saUJBQWlCLGlCQUFrQixzQkFDMUMsUUFBTyxVQUFVLE9BQVEsY0FYdkIsU0FBUSxNQUFNLG1CQWNsQixRQUFTLGtCQUFpQixJQUcxQixRQUFTLGtCQUFpQixJQUcxQixRQUFTLGtCQUFpQixJQUcxQixRQUFTLGlCQUFnQixHQUN2QixHQUFJLEdBQVMsU0FBUyxlQUFlLGFBQ2pDLEVBQU0sRUFBTyxXQUFXLE1BQ3hCLEVBQWEsU0FBUyxjQUFjLGVBQ3hDLElBQUksR0FBYyxHQUEyQyxrQkFBN0IsR0FBSSxxQkFBcUMsQ0FDdkUsR0FBSSxHQUFJLEVBQU8sTUFDWCxFQUFJLEVBQU8sT0FDWCxFQUFXLEVBQUkscUJBQ2IsR0FBSixFQUNJ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QUEwQixFQUFPLE9BQU8sUUFDL0QsRUFBTyxPQUFPLFFBQVUsRUFFeEIsRUFBTyxVQUFZLEdBR3BCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gcmVuZGVyV29yZENsb3VkQ292ZXJJbWFnZSgpIHtcbiAgaWYgKCF3aW5kb3cuV29yZENsb3VkKSB7XG4gICAgY29uc29sZS5lcnJvcignTm8gd29yZCBjbG91ZCBsaWJyYXJ5JylcbiAgfVxuICBlbHNlIGlmICghd2luZG93LldvcmRDbG91ZC5pc1N1cHBvcnRlZCkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1dvcmQgY2xvdWQgbm90IHN1cHBvcnRlZCcpO1xuICB9XG4gIGVsc2Uge1xuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29yZGNsb3VkJyk7XG4gICAgY2FudmFzLndpZHRoID0gd2luZG93LndvcmRjbG91ZENvbmZpZy5jYW52YXNXaWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LndvcmRjbG91ZENvbmZpZy5jYW52YXNIZWlnaHQ7XG4gICAgdmFyIHdpZHRoID0gY2FudmFzLndpZHRoO1xuICAgIGRyYXdXb3JkQ2xvdWQoe1xuICAgICAgZ3JpZFNpemU6IE1hdGgucm91bmQoOCAqIHdpZHRoIC8gMTAyNCksXG4gICAgICB3ZWlnaHRGYWN0b3I6IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHJldHVybiAxNiAqIE1hdGgucG93KHNpemUsIDEuMTUpICogd2lkdGggLyAxMDI0O1xuICAgICAgfSxcbiAgICAgIGZvbnRGYW1pbHk6ICdSb2JvdG8sIHNhbnMtc2VyaWYnLFxuICAgICAgY29sb3I6IGZ1bmN0aW9uICh3b3JkLCB3ZWlnaHQpIHtcbiAgICAgICByZXR1cm4gJ2hzbCgnICtcbiAgICAgICAgICAoTWF0aC5yYW5kb20oKSAqIDIwICsgNSkudG9GaXhlZCgpICsgJywnICtcbiAgICAgICAgICAoTWF0aC5yYW5kb20oKSAqIDIwICsgKDUwIC0gTWF0aC5wb3cod2VpZ2h0LCAyKSkpLnRvRml4ZWQoKSArICclLCcgK1xuICAgICAgICAgIChNYXRoLnJhbmRvbSgpICogMjAgKyAoNTAgLSBNYXRoLnBvdyh3ZWlnaHQsIDIpKSkudG9GaXhlZCgpICsgJyUpJztcbiAgICAgIH0sXG4gICAgICByb3RhdGVSYXRpbzogMC43NSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJyM0ODE4MTgnLFxuICAgICAgbGlzdDogZ2V0V29yZExpc3QoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYXdXb3JkQ2xvdWQob3B0aW9ucykge1xuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29yZGNsb3VkJyk7XG4gICAgaWYgKCFjYW52YXMpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGNhbnZhcyBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7IGxpc3Q6IFtdIH07XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucyA9IGV2YWwoXCJvcHRpb25zPVwiK29wdGlvbnMudHJpbSgpKTtcbiAgICB9XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3dvcmRjbG91ZGRyYXduJywgb25Xb3JkQ2xvdWREcmF3bik7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3dvcmRjbG91ZHN0YXJ0Jywgb25Xb3JkQ2xvdWRTdGFydCk7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3dvcmRjbG91ZHN0b3AnLCBvbldvcmRDbG91ZFN0b3ApO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd3b3JkY2xvdWRhYm9ydCcsIG9uV29yZENsb3VkQWJvcnQpO1xuICAgIHdpbmRvdy5Xb3JkQ2xvdWQoY2FudmFzLCBvcHRpb25zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV29yZENsb3VkRHJhd24oZXZ0KSB7XG4gIH1cblxuICBmdW5jdGlvbiBvbldvcmRDbG91ZFN0YXJ0KGV2dCkge1xuICB9XG5cbiAgZnVuY3Rpb24gb25Xb3JkQ2xvdWRBYm9ydChldnQpIHtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV29yZENsb3VkU3RvcChldnQpIHtcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dvcmRjbG91ZCcpO1xuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB2YXIgY292ZXJJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWhlYWRlcicpO1xuICAgIGlmIChjb3ZlckltYWdlICYmIGN0eCAmJiB0eXBlb2YgY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YXIgdyA9IGNhbnZhcy53aWR0aDtcbiAgICAgIHZhciBoID0gY2FudmFzLmhlaWdodDtcbiAgICAgIHZhciBncmFkaWVudCA9IGN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudChcbiAgICAgICAgdyAqIDAuNSxcbiAgICAgICAgaCAqIDAuNSxcbiAgICAgICAgaCAqIDAuMSxcbiAgICAgICAgdyAqIDAuNSxcbiAgICAgICAgaCAqIDAuNSxcbiAgICAgICAgdyAqIDAuNSk7XG4gICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMC4wLCAncmdiYSgyNDAsMCwwLDAuNSknKTtcbiAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjIsICdyZ2JhKDI0MCwwLDAsMC40KScpO1xuICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNywgJ3JnYmEoMjQwLDAsMCwwLjEpJyk7XG4gICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoMS4wLCAncmdiYSgwLCAgMCwwLDAuMyknKTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBncmFkaWVudDtcbiAgICAgIGN0eC5maWxsUmVjdCgwLDAsdyxoKTtcbiAgICAgIHZhciBwbmdEYXRhVXJsID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgICBjb3ZlckltYWdlLnN0eWxlWydiYWNrZ3JvdW5kLWltYWdlJ10gPSAndXJsKCcrcG5nRGF0YVVybCsnKSc7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGdldFdvcmRMaXN0KCkge1xuICByZXR1cm4gW1xuICAgIFtcIkxhaCFcIiwgNl0sXG4gICAgW1wiTGVoIVwiLCA1XSxcbiAgICBbXCJMb3IhXCIsIDVdLFxuICAgIFtcIk1laD9cIiwgNV0sXG4gICAgW1wid2FsYW8gZWhcIiwgNF0sXG4gICAgW1wiaHVhdCBhaFwiLCAxXSxcbiAgICBbXCJibyBwaWFuXCIsIDFdLFxuICAgIFtcInN0dXBpYWtcIiwgMV0sXG4gICAgW1wiYmx1ciBsaWtlIHNvdG9uZ1wiLCAxXSxcbiAgICBbXCJyZWZlcmVlIGtheXVcIiwgMV0sXG4gICAgW1wiYWggYm8gZGVuXCIsMV0sXG4gICAgW1wiYXJidXRoZW5cIiwyXSxcbiAgICBbXCJvayBhaFwiLDFdLFxuICAgIFtcInRla2FuXCIsMV0sXG4gICAgW1wiaGFudGFtXCIsMV0sXG4gICAgW1wiY29ycmlnaHRcIiwxXSxcbiAgICBbXCJ0YWxrIGNvY2tcIiwzXSxcbiAgICBbXCJjYW4gb3Igbm90XCIsMV0sXG4gICAgW1wiYnVheSB0YWhhblwiLDNdLFxuICAgIFtcImppYSBsYXRcIiwxXSxcbiAgICBbXCJnbyB3aGVyZVwiLDFdLFxuICAgIFtcInN0eWxvIG1pbG9cIiwzXSxcbiAgICBbXCJhbGFtYWtcIiwyXSxcbiAgICBbXCJrYW5hc2FpXCIsMV0sXG4gICAgW1wiYm8gbGlhb1wiLDFdLFxuICAgIFtcImNvY2thbmF0aGFuXCIsMV0sXG4gICAgW1wic3RlYWR5IHN0ZWFkeVwiLDFdLFxuICAgIFtcImJvbSBwaXBpXCIsMV0sXG4gICAgW1wicG93ZGVyZnVsXCIsMV0sXG4gICAgW1wicmlsYWsgb25lIGtvcm5lclwiLDJdLFxuICAgIFtcImNob3BlXCIsMV0sXG4gICAgW1wiaGVudGFrIGtha2lcIiwxXSxcbiAgICBbXCJsYW5nZ2FyXCIsMV0sXG4gICAgW1wiZ2FicmFcIiwxXSxcbiAgICBbXCJraWxhdFwiLDFdLFxuICAgIFtcImtheXBvaFwiLDJdLFxuICAgIFtcImFueWhvdyB3aGFja1wiLDJdLFxuICAgIFtcInNwb2lsIG1hcmtldFwiLDFdLFxuICAgIFtcImNoYW8ga2VuZ1wiLDFdLFxuICAgIFtcInNpb2wgYWhcIiwxXSxcbiAgICBbXCJnb3QgbWVoXCIsMV0sXG4gICAgW1wiaG9ybGFuIGxpYW9cIiwxXSxcbiAgICBbXCJoYWJpcyBsYWhcIiwxXSxcbiAgICBbXCJrZW5hIGhhbnRhbVwiLDFdLFxuICAgIFtcImtlbmEgc2FpXCIsMV0sXG4gICAgW1wia2VuYSBhcnJvd2VkXCIsMV0sXG4gICAgW1wiaGVuZyBhaFwiLDFdLFxuICAgIFtcImhlY2sgY2FyZSBsYWhcIiwxXSxcbiAgICBbXCJndWFpIGxhblwiLDFdLFxuICAgIFtcImthbyBwZWkga2FvIGJ1XCIsMV0sXG4gICAgW1wicGFpIHNlaFwiLDFdLFxuICAgIFtcImthbmNoZW9uZyBzcGlkZXJcIiwxXSxcbiAgICBbXCJsb2xlayB1bmNlclwiLDFdLFxuICAgIFtcImdvbGQgY2hhaW4gdW5jZXJcIiwxXSxcbiAgICBbXCJncmFuZGZhdGhlciByb2FkXCIsMV0sXG4gICAgW1wia29waXRpYW1cIiwxXSxcbiAgICBbXCJmbHkga2l0ZVwiLDJdLFxuICAgIFtcIm9zbyBjYW5cIiwxXSxcbiAgICBbXCJjb2NrIGV5ZVwiLDFdLFxuICAgIFtcImFuZ2thdCBib2xhXCIsMV0sXG4gICAgW1wiYmFsaWsga2FtcG9uZ1wiLDFdLFxuICAgIFtcImtpYXN1XCIsMV0sXG4gICAgW1wia2lhc2lcIiwxXSxcbiAgICBbXCJyZWZlcmVlIGtheXVcIiwxXSxcbiAgICBbXCJrZWxvbmdcIiwxXSxcbiAgICBbXCJzYWJvaCBraW5nXCIsMV0sXG4gICAgW1wid2F5YW5nIGtpbmdcIiwxXSxcbiAgICBbXCJwYW90b2gga2luZ1wiLDFdLFxuICAgIFtcInBhbmdzZWgga2luZ1wiLDFdLFxuICAgIFtcInBvbnRhbmcga2luZ1wiLDFdLFxuICAgIFtcImRyYW1hIHF1ZWVuXCIsMV0sXG4gICAgW1wiY2Fubm90IG1ha2UgaXRcIiwxXSxcbiAgICBbXCJnb29uZHVcIiwxXSxcbiAgICBbXCJjb25maXJtIHBsdXMgY2hvcFwiLDJdLFxuICAgIFtcImVza2V3IG1lXCIsMl0sXG4gICAgW1wia2FyYW5nIGd1bmlcIiwxXSxcbiAgICBbXCJwYWthdCBwYWthdCBhaFwiLDFdLFxuICAgIFtcInNoYWcgbGlhb1wiLDFdLFxuICAgIFtcImRvbuKAmWNoIHByYXkgcHJheVwiLDFdLFxuICAgIFtcInlhIHlhIHBhcGF5YVwiLDFdLFxuICAgIFtcInNvbmcgc29uZyBnYW8gSnVyb25nXCIsMV0sXG4gICAgW1wiaHVhdCBhaCFcIiwyXSxcbiAgICBbXCJzaW1pIHRhaWppXCIsMV0sXG4gICAgW1wibmVoIG5laCBwb2tcIiwxXSxcbiAgICBbXCJpdGNoeSBiYWNrc2lkZVwiLDFdLFxuICAgIFtcImFnYXJhdGlvblwiLDFdLFxuICAgIFtcInNpYSBsYVwiLDFdLFxuICAgIFtcImxlcGFrXCIsMV0sXG4gICAgW1wieXVtIHNlbmchXCIsMV0sXG4gICAgW1wiemh1biB6aHVuXCIsMV0sXG4gICAgW1wid2luIGxpYW8gbG9yXCIsMV0sXG4gICAgW1wiY2hlZW1cIiwxXSxcbiAgICBbXCJwb3dkZXJmdWwgc2lvbFwiLDFdLFxuICAgIFtcIkkgY2xhcCBmb3IgeW91XCIsMV0sXG4gICAgW1wiYmFyYW5nIGJhcmFuZ1wiLDFdLFxuICAgIFtcImN1cnJ5IHBva1wiLDFdLFxuICAgIFtcInN3ZWUgYWhcIiwxXSxcbiAgICBbXCJibyBjaHVwXCIsMl1cbiAgXTtcbn1cblxuZnVuY3Rpb24gZG9BbmFseXRpY3MoKSB7XG4gICAgdmFyIHNjcm9sbExpc3RlbmVyRGVib3VuY2VNcyA9IDE1MDtcbiAgICB2YXIgbWluU2Nyb2xsQmVmb3JlVHJhY2sgPSAxNTA7XG4gICAgdmFyIHNjcm9sbExpc3RlbmVyRGVib3VuY2VUaW1lciA9IDA7XG5cbiAgICB2YXIgdGltZU9mUGFnZUxvYWQgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgIHZhciBkdXJhdGlvblRvdGFsID0gMDtcbiAgICB2YXIgaGFzU2Nyb2xsZWRQYWdlU3RhcnQgPSBmYWxzZTtcbiAgICB2YXIgdGltZU9mU2Nyb2xsUGFnZVN0YXJ0O1xuICAgIHZhciBkdXJhdGlvblNjcm9sbFBhZ2VTdGFydDtcbiAgICB2YXIgaGFzU2Nyb2xsZWRDb250ZW50TWlkd2F5ID0gZmFsc2U7XG4gICAgdmFyIHRpbWVPZlNjcm9sbENvbnRlbnRNaWR3YXk7XG4gICAgdmFyIGR1cmF0aW9uU2Nyb2xsQ29udGVudE1pZHdheTtcbiAgICB2YXIgaGFzU2Nyb2xsZWRDb250ZW50RW5kID0gZmFsc2U7XG4gICAgdmFyIHRpbWVPZlNjcm9sbENvbnRlbnRFbmQ7XG4gICAgdmFyIGR1cmF0aW9uU2Nyb2xsQ29udGVudEVuZDtcbiAgICB2YXIgaGFzU2Nyb2xsZWRQYWdlRW5kID0gZmFsc2U7XG4gICAgdmFyIHRpbWVPZlNjcm9sbFBhZ2VFbmQ7XG4gICAgdmFyIGR1cmF0aW9uU2Nyb2xsUGFnZUVuZDtcblxuICAgIHZhciBhbmFseXRpY3M7XG4gICAgc3dpdGNoIChkb2N1bWVudC5sb2NhdGlvbi5ob3N0bmFtZSkge1xuICAgICAgY2FzZSAnbG9jYWxob3N0JzogY2FzZSAnMTI3LjAuMC4xJzogY2FzZSAnMC4wLjAuMCc6XG4gICAgICAgIGFuYWx5dGljcyA9IGZ1bmN0aW9uIGxvY2FsaG9zdEFuYWx5dGljcygpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFuYWx5dGljcyA9IHdpbmRvdy5nYTtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdC1jb250ZW50Jyk7XG4gICAgY29udGVudEVsZW1lbnQgPSBjb250ZW50RWxlbWVudCB8fCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuXG4gICAgYW5hbHl0aWNzKCdzZW5kJywgJ2V2ZW50JywgJ1JlYWRpbmcnLCAnUGFnZUxvYWRlZFRpbWUnLCAnJywgTWF0aC5yb3VuZCh0aW1lT2ZQYWdlTG9hZCAvIDEwMDApKTtcblxuICAgICQod2luZG93KS5zY3JvbGwoZGVib3VuY2VTY3JvbGxIYW5kbGVyKTtcblxuICAgIGZ1bmN0aW9uIGRlYm91bmNlU2Nyb2xsSGFuZGxlcigpIHtcbiAgICAgIC8vIERlLWJvdW5jZVxuICAgICAgaWYgKHNjcm9sbExpc3RlbmVyRGVib3VuY2VUaW1lcikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc2Nyb2xsTGlzdGVuZXJEZWJvdW5jZVRpbWVyKTtcbiAgICAgIH1cbiAgICAgIHNjcm9sbExpc3RlbmVyRGVib3VuY2VUaW1lciA9IHNldFRpbWVvdXQodHJhY2tTY3JvbGxpbmcsIHNjcm9sbExpc3RlbmVyRGVib3VuY2VNcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHJhY2tTY3JvbGxpbmcoKSB7XG4gICAgICB2YXIgYm90dG9tID0gJCh3aW5kb3cpLmhlaWdodCgpICsgJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgdmFyIGhlaWdodCA9ICQoZG9jdW1lbnQpLmhlaWdodCgpO1xuXG4gICAgICBpZiAoIWhhc1Njcm9sbGVkUGFnZVN0YXJ0ICYmIGJvdHRvbSA+IG1pblNjcm9sbEJlZm9yZVRyYWNrKSB7XG4gICAgICAgIC8vIFN0YXJ0IG9mIHBhZ2VcbiAgICAgICAgdGltZU9mU2Nyb2xsUGFnZVN0YXJ0ID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgZHVyYXRpb25TY3JvbGxQYWdlU3RhcnQgPSBNYXRoLnJvdW5kKCh0aW1lT2ZTY3JvbGxQYWdlU3RhcnQgLSB0aW1lT2ZQYWdlTG9hZCkgLyAxMDAwKTtcbiAgICAgICAgZHVyYXRpb25Ub3RhbCA9IGR1cmF0aW9uU2Nyb2xsUGFnZVN0YXJ0O1xuXG4gICAgICAgIGFuYWx5dGljcygnc2VuZCcsICdldmVudCcsICdSZWFkaW5nJywgJ1BhZ2VTdGFydCcsICcnLCBkdXJhdGlvblNjcm9sbFBhZ2VTdGFydCk7XG4gICAgICAgIGhhc1Njcm9sbGVkUGFnZVN0YXJ0ID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEhY29udGVudEVsZW1lbnQgJiYgIWhhc1Njcm9sbGVkQ29udGVudEVuZCkge1xuICAgICAgICAvLyBNaWR3YXkgb3IgZW5kIG9mIGNvbnRlbnRcbiAgICAgICAgdmFyIHJlY3QgPSBjb250ZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGNvbnRlbnRUb3AgPSByZWN0LnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgICAgICB2YXIgY29udGVudEJvdHRvbSA9IGNvbnRlbnRUb3AgKyByZWN0LmhlaWdodDtcbiAgICAgICAgaWYgKGJvdHRvbSA+IGNvbnRlbnRCb3R0b20pIHtcbiAgICAgICAgICB0aW1lT2ZTY3JvbGxDb250ZW50RW5kID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgICBkdXJhdGlvblNjcm9sbENvbnRlbnRFbmQgPSBNYXRoLnJvdW5kKCh0aW1lT2ZTY3JvbGxDb250ZW50RW5kIC0gdGltZU9mUGFnZUxvYWQpIC8gMTAwMCk7XG4gICAgICAgICAgZHVyYXRpb25Ub3RhbCA9IGR1cmF0aW9uU2Nyb2xsQ29udGVudEVuZDtcblxuICAgICAgICAgIGFuYWx5dGljcygnc2VuZCcsICdldmVudCcsICdSZWFkaW5nJywgJ0NvbnRlbnRFbmQnLCAnJywgZHVyYXRpb25TY3JvbGxDb250ZW50RW5kKTtcbiAgICAgICAgICBzZXRSZWFkZXJDYXRlZ29yeSgpO1xuICAgICAgICAgIGhhc1Njcm9sbGVkQ29udGVudEVuZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWhhc1Njcm9sbGVkQ29udGVudE1pZHdheSAmJiBib3R0b20gPiBjb250ZW50VG9wICsgKHJlY3QuaGVpZ2h0ICogMC41KSkge1xuICAgICAgICAgIHRpbWVPZlNjcm9sbENvbnRlbnRNaWR3YXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgICAgIGR1cmF0aW9uU2Nyb2xsQ29udGVudE1pZHdheSA9IE1hdGgucm91bmQoKHRpbWVPZlNjcm9sbENvbnRlbnRNaWR3YXkgLSB0aW1lT2ZQYWdlTG9hZCkgLyAxMDAwKTtcbiAgICAgICAgICBkdXJhdGlvblRvdGFsID0gZHVyYXRpb25TY3JvbGxDb250ZW50TWlkd2F5O1xuXG4gICAgICAgICAgYW5hbHl0aWNzKCdzZW5kJywgJ2V2ZW50JywgJ1JlYWRpbmcnLCAnQ29udGVudE1pZHdheScsICcnLCBkdXJhdGlvblNjcm9sbENvbnRlbnRNaWR3YXkpO1xuICAgICAgICAgIGhhc1Njcm9sbGVkQ29udGVudE1pZHdheSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFoYXNTY3JvbGxlZFBhZ2VFbmQgJiYgYm90dG9tID49IGhlaWdodCkge1xuICAgICAgICAvLyBCb3R0b20gb2YgcGFnZVxuICAgICAgICB0aW1lT2ZTY3JvbGxQYWdlRW5kID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgZHVyYXRpb25TY3JvbGxQYWdlRW5kID0gTWF0aC5yb3VuZCgodGltZU9mU2Nyb2xsUGFnZUVuZCAtIHRpbWVPZlBhZ2VMb2FkKSAvIDEwMDApO1xuICAgICAgICBkdXJhdGlvblRvdGFsID0gZHVyYXRpb25TY3JvbGxQYWdlRW5kO1xuXG4gICAgICAgIGFuYWx5dGljcygnc2VuZCcsICdldmVudCcsICdSZWFkaW5nJywgJ1BhZ2VFbmQnLCAnJywgZHVyYXRpb25TY3JvbGxQYWdlRW5kKTtcbiAgICAgICAgc2V0UmVhZGVyQ2F0ZWdvcnkoKTtcbiAgICAgICAgaGFzU2Nyb2xsZWRQYWdlRW5kID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRSZWFkZXJDYXRlZ29yeSgpIHtcbiAgICAgIHZhciBjYXQ7XG4gICAgICBpZiAoZHVyYXRpb25Ub3RhbCA8IDYwKSB7XG4gICAgICAgIGNhdCA9ICdTa2ltJztcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjYXQgPSAnVGhvcm91Z2gnO1xuICAgICAgfVxuICAgICAgYW5hbHl0aWNzKCdzZXQnLCAnZGltZW5zaW9uMScsIGNhdCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkb1NoYXJlRHluYW1pYygpIHtcbiAgdmFyIGdyb3VwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaGFyZS1keW5hbWljJyk7XG4gIGlmICghZ3JvdXBzIHx8IGdyb3Vwcy5sZW5ndGggPCAxKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciB1cmwgPSBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAvL1RPRE8gZ2V0IHByb3BlciBtZWRpYSBVUkxcbiAgdmFyIG1lZGlhVXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KCdodHRwOi8vc2hpcnRsYWguY29tL2ltYWdlcy9zaGlydGxhaC1sb2dvLTMwMHgzMDAucG5nJyk7XG4gIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uIGVhY2hHcm91cChncm91cCkge1xuICAgIHZhciBpbnB1dCA9IGdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dCcpO1xuICAgIC8vIHZhciB0d2l0dGVyID0gZ3JvdXAucXVlcnlTZWxlY3RvcignLnR3aXR0ZXInKTtcbiAgICAvLyB2YXIgZmFjZWJvb2sgPSBncm91cC5xdWVyeVNlbGVjdG9yKCcuZmFjZWJvb2snKTtcbiAgICAvLyB2YXIgcGludGVyZXN0ID0gZ3JvdXAucXVlcnlTZWxlY3RvcignLnBpbnRlcmVzdCcpO1xuICAgIC8vIHZhciBnb29nbGVwbHVzID0gZ3JvdXAucXVlcnlTZWxlY3RvcignLmdvb2dsZXBsdXMnKTtcbiAgICB2YXIgZGF0YSA9IHtcbiAgICAgIGlucHV0OiBpbnB1dCxcbiAgICAgIHR3aXR0ZXI6IGdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy50d2l0dGVyJyksXG4gICAgICBmYWNlYm9vazogZ3JvdXAucXVlcnlTZWxlY3RvcignLmZhY2Vib29rJyksXG4gICAgICBwaW50ZXJlc3Q6IGdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5waW50ZXJlc3QnKSxcbiAgICAgIGdvb2dsZXBsdXM6IGdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5nb29nbGVwbHVzJyksXG4gICAgfTtcbiAgICBpbnB1dENoYW5nZWQoZGF0YSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBpbnB1dENoYW5nZWQuYmluZCh1bmRlZmluZWQsIGRhdGEpKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gaW5wdXRDaGFuZ2VkKGRhdGEpIHtcbiAgICB2YXIgY29udGVudCA9IGVuY29kZVVSSUNvbXBvbmVudChkYXRhLmlucHV0LnZhbHVlKTtcbiAgICBkYXRhLnR3aXR0ZXIuaHJlZiA9ICdodHRwczovL3R3aXR0ZXIuY29tL3NoYXJlP3N0YXR1cz0nK2NvbnRlbnQ7XG4gICAgZGF0YS5mYWNlYm9vay5ocmVmID0gJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZXIvc2hhcmVyLnBocD91PScrdXJsO1xuICAgIGRhdGEucGludGVyZXN0LmhyZWYgPVxuICAgICAgJ2h0dHA6Ly9waW50ZXJlc3QuY29tL3Bpbi9jcmVhdGUvYnV0dG9uLz91cmw9Jyt1cmwrXG4gICAgICAne3sgaWYgLlBhcmFtcy5waW50ZXJlc3RtZWRpYSB9fSZhbXA7bWVkaWE9JyttZWRpYVVybCsnJmFtcDtkZXNjcmlwdGlvbj0nK2NvbnRlbnQ7XG4gICAgZGF0YS5nb29nbGVwbHVzLmhyZWYgPSAnaHR0cHM6Ly9wbHVzLmdvb2dsZS5jb20vc2hhcmU/dXJsPScrdXJsO1xuICB9XG59XG5cbmpRdWVyeShmdW5jdGlvbigkKSB7XG4gIGRvQW5hbHl0aWNzKCk7XG4gIGRvU2hhcmVEeW5hbWljKCk7XG4gIHJlbmRlcldvcmRDbG91ZENvdmVySW1hZ2UoKTtcbn0pO1xuIiwicmVxdWlyZSgnLi93b3JkY2xvdWQyLmpzJyk7XG5yZXF1aXJlKCcuL2NvZGUuanMnKTtcbiIsIi8qIVxuICogd29yZGNsb3VkMi5qc1xuICogaHR0cDovL3RpbWRyZWFtLm9yZy93b3JkY2xvdWQyLmpzL1xuICpcbiAqIENvcHlyaWdodCAyMDExIC0gMjAxMyBUaW0gQ2hpZW5cbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gc2V0SW1tZWRpYXRlXG5pZiAoIXdpbmRvdy5zZXRJbW1lZGlhdGUpIHtcbiAgd2luZG93LnNldEltbWVkaWF0ZSA9IChmdW5jdGlvbiBzZXR1cFNldEltbWVkaWF0ZSgpIHtcbiAgICByZXR1cm4gd2luZG93Lm1zU2V0SW1tZWRpYXRlIHx8XG4gICAgd2luZG93LndlYmtpdFNldEltbWVkaWF0ZSB8fFxuICAgIHdpbmRvdy5tb3pTZXRJbW1lZGlhdGUgfHxcbiAgICB3aW5kb3cub1NldEltbWVkaWF0ZSB8fFxuICAgIChmdW5jdGlvbiBzZXR1cFNldFplcm9UaW1lb3V0KCkge1xuICAgICAgaWYgKCF3aW5kb3cucG9zdE1lc3NhZ2UgfHwgIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2FsbGJhY2tzID0gW3VuZGVmaW5lZF07XG4gICAgICB2YXIgbWVzc2FnZSA9ICd6ZXJvLXRpbWVvdXQtbWVzc2FnZSc7XG5cbiAgICAgIC8vIExpa2Ugc2V0VGltZW91dCwgYnV0IG9ubHkgdGFrZXMgYSBmdW5jdGlvbiBhcmd1bWVudC4gIFRoZXJlJ3NcbiAgICAgIC8vIG5vIHRpbWUgYXJndW1lbnQgKGFsd2F5cyB6ZXJvKSBhbmQgbm8gYXJndW1lbnRzICh5b3UgaGF2ZSB0b1xuICAgICAgLy8gdXNlIGEgY2xvc3VyZSkuXG4gICAgICB2YXIgc2V0WmVyb1RpbWVvdXQgPSBmdW5jdGlvbiBzZXRaZXJvVGltZW91dChjYWxsYmFjaykge1xuICAgICAgICB2YXIgaWQgPSBjYWxsYmFja3MubGVuZ3RoO1xuICAgICAgICBjYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZShtZXNzYWdlICsgaWQudG9TdHJpbmcoMzYpLCAnKicpO1xuXG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24gc2V0WmVyb1RpbWVvdXRNZXNzYWdlKGV2dCkge1xuICAgICAgICAvLyBTa2lwcGluZyBjaGVja2luZyBldmVudCBzb3VyY2UsIHJldGFyZGVkIElFIGNvbmZ1c2VkIHRoaXMgd2luZG93XG4gICAgICAgIC8vIG9iamVjdCB3aXRoIGFub3RoZXIgaW4gdGhlIHByZXNlbmNlIG9mIGlmcmFtZVxuICAgICAgICBpZiAodHlwZW9mIGV2dC5kYXRhICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgZXZ0LmRhdGEuc3Vic3RyKDAsIG1lc3NhZ2UubGVuZ3RoKSAhPT0gbWVzc2FnZS8qIHx8XG4gICAgICAgICAgICBldnQuc291cmNlICE9PSB3aW5kb3cgKi8pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgdmFyIGlkID0gcGFyc2VJbnQoZXZ0LmRhdGEuc3Vic3RyKG1lc3NhZ2UubGVuZ3RoKSwgMzYpO1xuICAgICAgICBpZiAoIWNhbGxiYWNrc1tpZF0pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFja3NbaWRdKCk7XG4gICAgICAgIGNhbGxiYWNrc1tpZF0gPSB1bmRlZmluZWQ7XG4gICAgICB9LCB0cnVlKTtcblxuICAgICAgLyogc3BlY2lmeSBjbGVhckltbWVkaWF0ZSgpIGhlcmUgc2luY2Ugd2UgbmVlZCB0aGUgc2NvcGUgKi9cbiAgICAgIHdpbmRvdy5jbGVhckltbWVkaWF0ZSA9IGZ1bmN0aW9uIGNsZWFyWmVyb1RpbWVvdXQoaWQpIHtcbiAgICAgICAgaWYgKCFjYWxsYmFja3NbaWRdKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2tzW2lkXSA9IHVuZGVmaW5lZDtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBzZXRaZXJvVGltZW91dDtcbiAgICB9KSgpIHx8XG4gICAgLy8gZmFsbGJhY2tcbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGVGYWxsYmFjayhmbikge1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoZm4sIDApO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbmlmICghd2luZG93LmNsZWFySW1tZWRpYXRlKSB7XG4gIHdpbmRvdy5jbGVhckltbWVkaWF0ZSA9IChmdW5jdGlvbiBzZXR1cENsZWFySW1tZWRpYXRlKCkge1xuICAgIHJldHVybiB3aW5kb3cubXNDbGVhckltbWVkaWF0ZSB8fFxuICAgIHdpbmRvdy53ZWJraXRDbGVhckltbWVkaWF0ZSB8fFxuICAgIHdpbmRvdy5tb3pDbGVhckltbWVkaWF0ZSB8fFxuICAgIHdpbmRvdy5vQ2xlYXJJbW1lZGlhdGUgfHxcbiAgICAvLyBcImNsZWFyWmVyb1RpbWVvdXRcIiBpcyBpbXBsZW1lbnQgb24gdGhlIHByZXZpb3VzIGJsb2NrIHx8XG4gICAgLy8gZmFsbGJhY2tcbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZUZhbGxiYWNrKHRpbWVyKSB7XG4gICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICB9O1xuICB9KSgpO1xufVxuXG4oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbiAgLy8gQ2hlY2sgaWYgV29yZENsb3VkIGNhbiBydW4gb24gdGhpcyBicm93c2VyXG4gIHZhciBpc1N1cHBvcnRlZCA9IChmdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgaWYgKCFjYW52YXMgfHwgIWNhbnZhcy5nZXRDb250ZXh0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGlmICghY3R4LmdldEltYWdlRGF0YSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIWN0eC5maWxsVGV4dCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghQXJyYXkucHJvdG90eXBlLnNvbWUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFBcnJheS5wcm90b3R5cGUucHVzaCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9KCkpO1xuXG4gIC8vIEZpbmQgb3V0IGlmIHRoZSBicm93c2VyIGltcG9zZSBtaW5pdW0gZm9udCBzaXplIGJ5XG4gIC8vIGRyYXdpbmcgc21hbGwgdGV4dHMgb24gYSBjYW52YXMgYW5kIG1lYXN1cmUgaXQncyB3aWR0aC5cbiAgdmFyIG1pbml1bUZvbnRTaXplID0gKGZ1bmN0aW9uIGdldE1pbml1bUZvbnRTaXplKCkge1xuICAgIGlmICghaXNTdXBwb3J0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgY3R4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIC8vIHN0YXJ0IGZyb20gMjBcbiAgICB2YXIgc2l6ZSA9IDIwO1xuXG4gICAgLy8gdHdvIHNpemVzIHRvIG1lYXN1cmVcbiAgICB2YXIgaGFuV2lkdGgsIG1XaWR0aDtcblxuICAgIHdoaWxlIChzaXplKSB7XG4gICAgICBjdHguZm9udCA9IHNpemUudG9TdHJpbmcoMTApICsgJ3B4IHNhbnMtc2VyaWYnO1xuICAgICAgaWYgKChjdHgubWVhc3VyZVRleHQoJ1xcdUZGMzcnKS53aWR0aCA9PT0gaGFuV2lkdGgpICYmXG4gICAgICAgICAgKGN0eC5tZWFzdXJlVGV4dCgnbScpLndpZHRoKSA9PT0gbVdpZHRoKSB7XG4gICAgICAgIHJldHVybiAoc2l6ZSArIDEpO1xuICAgICAgfVxuXG4gICAgICBoYW5XaWR0aCA9IGN0eC5tZWFzdXJlVGV4dCgnXFx1RkYzNycpLndpZHRoO1xuICAgICAgbVdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KCdtJykud2lkdGg7XG5cbiAgICAgIHNpemUtLTtcbiAgICB9XG5cbiAgICByZXR1cm4gMDtcbiAgfSkoKTtcblxuICAvLyBCYXNlZCBvbiBodHRwOi8vanNmcm9taGVsbC5jb20vYXJyYXkvc2h1ZmZsZVxuICB2YXIgc2h1ZmZsZUFycmF5ID0gZnVuY3Rpb24gc2h1ZmZsZUFycmF5KGFycikge1xuICAgIGZvciAodmFyIGosIHgsIGkgPSBhcnIubGVuZ3RoOyBpO1xuICAgICAgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGkpLFxuICAgICAgeCA9IGFyclstLWldLCBhcnJbaV0gPSBhcnJbal0sXG4gICAgICBhcnJbal0gPSB4KSB7fVxuICAgIHJldHVybiBhcnI7XG4gIH07XG5cbiAgdmFyIFdvcmRDbG91ZCA9IGZ1bmN0aW9uIFdvcmRDbG91ZChlbGVtZW50cywgb3B0aW9ucykge1xuICAgIGlmICghaXNTdXBwb3J0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZWxlbWVudHMpKSB7XG4gICAgICBlbGVtZW50cyA9IFtlbGVtZW50c107XG4gICAgfVxuXG4gICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihlbCwgaSkge1xuICAgICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZWxlbWVudHNbaV0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCk7XG4gICAgICAgIGlmICghZWxlbWVudHNbaV0pIHtcbiAgICAgICAgICB0aHJvdyAnVGhlIGVsZW1lbnQgaWQgc3BlY2lmaWVkIGlzIG5vdCBmb3VuZC4nO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFlbC50YWdOYW1lICYmICFlbC5hcHBlbmRDaGlsZCkge1xuICAgICAgICB0aHJvdyAnWW91IG11c3QgcGFzcyB2YWxpZCBIVE1MIGVsZW1lbnRzLCBvciBJRCBvZiB0aGUgZWxlbWVudC4nO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyogRGVmYXVsdCB2YWx1ZXMgdG8gYmUgb3ZlcndyaXR0ZW4gYnkgb3B0aW9ucyBvYmplY3QgKi9cbiAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICBsaXN0OiBbXSxcbiAgICAgIGZvbnRGYW1pbHk6ICdcIlRyZWJ1Y2hldCBNU1wiLCBcIkhlaXRpIFRDXCIsIFwi5b6u6Luf5q2j6buR6auUXCIsICcgK1xuICAgICAgICAgICAgICAgICAgJ1wiQXJpYWwgVW5pY29kZSBNU1wiLCBcIkRyb2lkIEZhbGxiYWNrIFNhbnNcIiwgc2Fucy1zZXJpZicsXG4gICAgICBmb250V2VpZ2h0OiAnbm9ybWFsJyxcbiAgICAgIGNvbG9yOiAncmFuZG9tLWRhcmsnLFxuICAgICAgbWluU2l6ZTogMCwgLy8gMCB0byBkaXNhYmxlXG4gICAgICB3ZWlnaHRGYWN0b3I6IDEsXG4gICAgICBjbGVhckNhbnZhczogdHJ1ZSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLCAgLy8gb3BhcXVlIHdoaXRlID0gcmdiYSgyNTUsIDI1NSwgMjU1LCAxKVxuXG4gICAgICBncmlkU2l6ZTogOCxcbiAgICAgIG9yaWdpbjogbnVsbCxcblxuICAgICAgZHJhd01hc2s6IGZhbHNlLFxuICAgICAgbWFza0NvbG9yOiAncmdiYSgyNTUsMCwwLDAuMyknLFxuICAgICAgbWFza0dhcFdpZHRoOiAwLjMsXG5cbiAgICAgIHdhaXQ6IDAsXG4gICAgICBhYm9ydFRocmVzaG9sZDogMCwgLy8gZGlzYWJsZWRcbiAgICAgIGFib3J0OiBmdW5jdGlvbiBub29wKCkge30sXG5cbiAgICAgIG1pblJvdGF0aW9uOiAtIE1hdGguUEkgLyAyLFxuICAgICAgbWF4Um90YXRpb246IE1hdGguUEkgLyAyLFxuXG4gICAgICBzaHVmZmxlOiB0cnVlLFxuICAgICAgcm90YXRlUmF0aW86IDAuMSxcblxuICAgICAgc2hhcGU6ICdjaXJjbGUnLFxuICAgICAgZWxsaXB0aWNpdHk6IDAuNjUsXG5cbiAgICAgIGhvdmVyOiBudWxsLFxuICAgICAgY2xpY2s6IG51bGxcbiAgICB9O1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmIChrZXkgaW4gc2V0dGluZ3MpIHtcbiAgICAgICAgICBzZXR0aW5nc1trZXldID0gb3B0aW9uc1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogQ29udmVydCB3ZWlnaHRGYWN0b3IgaW50byBhIGZ1bmN0aW9uICovXG4gICAgaWYgKHR5cGVvZiBzZXR0aW5ncy53ZWlnaHRGYWN0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHZhciBmYWN0b3IgPSBzZXR0aW5ncy53ZWlnaHRGYWN0b3I7XG4gICAgICBzZXR0aW5ncy53ZWlnaHRGYWN0b3IgPSBmdW5jdGlvbiB3ZWlnaHRGYWN0b3IocHQpIHtcbiAgICAgICAgcmV0dXJuIHB0ICogZmFjdG9yOyAvL2luIHB4XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qIENvbnZlcnQgc2hhcGUgaW50byBhIGZ1bmN0aW9uICovXG4gICAgaWYgKHR5cGVvZiBzZXR0aW5ncy5zaGFwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgc3dpdGNoIChzZXR0aW5ncy5zaGFwZSkge1xuICAgICAgICBjYXNlICdjaXJjbGUnOlxuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8gJ2NpcmNsZScgaXMgdGhlIGRlZmF1bHQgYW5kIGEgc2hvcnRjdXQgaW4gdGhlIGNvZGUgbG9vcC5cbiAgICAgICAgICBzZXR0aW5ncy5zaGFwZSA9ICdjaXJjbGUnO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2NhcmRpb2lkJzpcbiAgICAgICAgICBzZXR0aW5ncy5zaGFwZSA9IGZ1bmN0aW9uIHNoYXBlQ2FyZGlvaWQodGhldGEpIHtcbiAgICAgICAgICAgIHJldHVybiAxIC0gTWF0aC5zaW4odGhldGEpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgLypcblxuICAgICAgICBUbyB3b3JrIG91dCBhbiBYLWdvbiwgb25lIGhhcyB0byBjYWxjdWxhdGUgXCJtXCIsXG4gICAgICAgIHdoZXJlIDEvKGNvcygyKlBJL1gpK20qc2luKDIqUEkvWCkpID0gMS8oY29zKDApK20qc2luKDApKVxuICAgICAgICBodHRwOi8vd3d3LndvbGZyYW1hbHBoYS5jb20vaW5wdXQvP2k9MSUyRiUyOGNvcyUyODIqUEklMkZYJTI5JTJCbSpzaW4lMjhcbiAgICAgICAgMipQSSUyRlglMjklMjkrJTNEKzElMkYlMjhjb3MlMjgwJTI5JTJCbSpzaW4lMjgwJTI5JTI5XG5cbiAgICAgICAgQ29weSB0aGUgc29sdXRpb24gaW50byBwb2xhciBlcXVhdGlvbiByID0gMS8oY29zKHQnKSArIG0qc2luKHQnKSlcbiAgICAgICAgd2hlcmUgdCcgZXF1YWxzIHRvIG1vZCh0LCAyUEkvWCk7XG5cbiAgICAgICAgKi9cblxuICAgICAgICBjYXNlICdkaWFtb25kJzpcbiAgICAgICAgY2FzZSAnc3F1YXJlJzpcbiAgICAgICAgICAvLyBodHRwOi8vd3d3LndvbGZyYW1hbHBoYS5jb20vaW5wdXQvP2k9cGxvdCtyKyUzRCsxJTJGJTI4Y29zJTI4bW9kK1xuICAgICAgICAgIC8vICUyOHQlMkMrUEklMkYyJTI5JTI5JTJCc2luJTI4bW9kKyUyOHQlMkMrUEklMkYyJTI5JTI5JTI5JTJDK3QrJTNEXG4gICAgICAgICAgLy8gKzArLi4rMipQSVxuICAgICAgICAgIHNldHRpbmdzLnNoYXBlID0gZnVuY3Rpb24gc2hhcGVTcXVhcmUodGhldGEpIHtcbiAgICAgICAgICAgIHZhciB0aGV0YVByaW1lID0gdGhldGEgJSAoMiAqIE1hdGguUEkgLyA0KTtcbiAgICAgICAgICAgIHJldHVybiAxIC8gKE1hdGguY29zKHRoZXRhUHJpbWUpICsgTWF0aC5zaW4odGhldGFQcmltZSkpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAndHJpYW5nbGUtZm9yd2FyZCc6XG4gICAgICAgICAgLy8gaHR0cDovL3d3dy53b2xmcmFtYWxwaGEuY29tL2lucHV0Lz9pPXBsb3QrcislM0QrMSUyRiUyOGNvcyUyOG1vZCtcbiAgICAgICAgICAvLyAlMjh0JTJDKzIqUEklMkYzJTI5JTI5JTJCc3FydCUyODMlMjlzaW4lMjhtb2QrJTI4dCUyQysyKlBJJTJGMyUyOVxuICAgICAgICAgIC8vICUyOSUyOSUyQyt0KyUzRCswKy4uKzIqUElcbiAgICAgICAgICBzZXR0aW5ncy5zaGFwZSA9IGZ1bmN0aW9uIHNoYXBlVHJpYW5nbGUodGhldGEpIHtcbiAgICAgICAgICAgIHZhciB0aGV0YVByaW1lID0gdGhldGEgJSAoMiAqIE1hdGguUEkgLyAzKTtcbiAgICAgICAgICAgIHJldHVybiAxIC8gKE1hdGguY29zKHRoZXRhUHJpbWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc3FydCgzKSAqIE1hdGguc2luKHRoZXRhUHJpbWUpKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3RyaWFuZ2xlJzpcbiAgICAgICAgY2FzZSAndHJpYW5nbGUtdXByaWdodCc6XG4gICAgICAgICAgc2V0dGluZ3Muc2hhcGUgPSBmdW5jdGlvbiBzaGFwZVRyaWFuZ2xlKHRoZXRhKSB7XG4gICAgICAgICAgICB2YXIgdGhldGFQcmltZSA9ICh0aGV0YSArIE1hdGguUEkgKiAzIC8gMikgJSAoMiAqIE1hdGguUEkgLyAzKTtcbiAgICAgICAgICAgIHJldHVybiAxIC8gKE1hdGguY29zKHRoZXRhUHJpbWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc3FydCgzKSAqIE1hdGguc2luKHRoZXRhUHJpbWUpKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3BlbnRhZ29uJzpcbiAgICAgICAgICBzZXR0aW5ncy5zaGFwZSA9IGZ1bmN0aW9uIHNoYXBlUGVudGFnb24odGhldGEpIHtcbiAgICAgICAgICAgIHZhciB0aGV0YVByaW1lID0gKHRoZXRhICsgMC45NTUpICUgKDIgKiBNYXRoLlBJIC8gNSk7XG4gICAgICAgICAgICByZXR1cm4gMSAvIChNYXRoLmNvcyh0aGV0YVByaW1lKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAwLjcyNjU0MyAqIE1hdGguc2luKHRoZXRhUHJpbWUpKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3N0YXInOlxuICAgICAgICAgIHNldHRpbmdzLnNoYXBlID0gZnVuY3Rpb24gc2hhcGVTdGFyKHRoZXRhKSB7XG4gICAgICAgICAgICB2YXIgdGhldGFQcmltZSA9ICh0aGV0YSArIDAuOTU1KSAlICgyICogTWF0aC5QSSAvIDEwKTtcbiAgICAgICAgICAgIGlmICgodGhldGEgKyAwLjk1NSkgJSAoMiAqIE1hdGguUEkgLyA1KSAtICgyICogTWF0aC5QSSAvIDEwKSA+PSAwKSB7XG4gICAgICAgICAgICAgIHJldHVybiAxIC8gKE1hdGguY29zKCgyICogTWF0aC5QSSAvIDEwKSAtIHRoZXRhUHJpbWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgMy4wNzc2OCAqIE1hdGguc2luKCgyICogTWF0aC5QSSAvIDEwKSAtIHRoZXRhUHJpbWUpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiAxIC8gKE1hdGguY29zKHRoZXRhUHJpbWUpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgMy4wNzc2OCAqIE1hdGguc2luKHRoZXRhUHJpbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qIE1ha2Ugc3VyZSBncmlkU2l6ZSBpcyBhIHdob2xlIG51bWJlciBhbmQgaXMgbm90IHNtYWxsZXIgdGhhbiA0cHggKi9cbiAgICBzZXR0aW5ncy5ncmlkU2l6ZSA9IE1hdGgubWF4KE1hdGguZmxvb3Ioc2V0dGluZ3MuZ3JpZFNpemUpLCA0KTtcblxuICAgIC8qIHNob3J0aGFuZCAqL1xuICAgIHZhciBnID0gc2V0dGluZ3MuZ3JpZFNpemU7XG4gICAgdmFyIG1hc2tSZWN0V2lkdGggPSBnIC0gc2V0dGluZ3MubWFza0dhcFdpZHRoO1xuXG4gICAgLyogbm9ybWFsaXplIHJvdGF0aW9uIHNldHRpbmdzICovXG4gICAgdmFyIHJvdGF0aW9uUmFuZ2UgPSBNYXRoLmFicyhzZXR0aW5ncy5tYXhSb3RhdGlvbiAtIHNldHRpbmdzLm1pblJvdGF0aW9uKTtcbiAgICB2YXIgbWluUm90YXRpb24gPSBNYXRoLm1pbihzZXR0aW5ncy5tYXhSb3RhdGlvbiwgc2V0dGluZ3MubWluUm90YXRpb24pO1xuXG4gICAgLyogaW5mb3JtYXRpb24vb2JqZWN0IGF2YWlsYWJsZSB0byBhbGwgZnVuY3Rpb25zLCBzZXQgd2hlbiBzdGFydCgpICovXG4gICAgdmFyIGdyaWQsIC8vIDJkIGFycmF5IGNvbnRhaW5pbmcgZmlsbGluZyBpbmZvcm1hdGlvblxuICAgICAgbmd4LCBuZ3ksIC8vIHdpZHRoIGFuZCBoZWlnaHQgb2YgdGhlIGdyaWRcbiAgICAgIGNlbnRlciwgLy8gcG9zaXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGUgY2xvdWRcbiAgICAgIG1heFJhZGl1cztcblxuICAgIC8qIHRpbWVzdGFtcCBmb3IgbWVhc3VyaW5nIGVhY2ggcHV0V29yZCgpIGFjdGlvbiAqL1xuICAgIHZhciBlc2NhcGVUaW1lO1xuXG4gICAgLyogZnVuY3Rpb24gZm9yIGdldHRpbmcgdGhlIGNvbG9yIG9mIHRoZSB0ZXh0ICovXG4gICAgdmFyIGdldFRleHRDb2xvcjtcbiAgICBmdW5jdGlvbiByYW5kb21faHNsX2NvbG9yKG1pbiwgbWF4KSB7XG4gICAgICByZXR1cm4gJ2hzbCgnICtcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgKiAzNjApLnRvRml4ZWQoKSArICcsJyArXG4gICAgICAgIChNYXRoLnJhbmRvbSgpICogMzAgKyA3MCkudG9GaXhlZCgpICsgJyUsJyArXG4gICAgICAgIChNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pLnRvRml4ZWQoKSArICclKSc7XG4gICAgfVxuICAgIHN3aXRjaCAoc2V0dGluZ3MuY29sb3IpIHtcbiAgICAgIGNhc2UgJ3JhbmRvbS1kYXJrJzpcbiAgICAgICAgZ2V0VGV4dENvbG9yID0gZnVuY3Rpb24gZ2V0UmFuZG9tRGFya0NvbG9yKCkge1xuICAgICAgICAgIHJldHVybiByYW5kb21faHNsX2NvbG9yKDEwLCA1MCk7XG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdyYW5kb20tbGlnaHQnOlxuICAgICAgICBnZXRUZXh0Q29sb3IgPSBmdW5jdGlvbiBnZXRSYW5kb21MaWdodENvbG9yKCkge1xuICAgICAgICAgIHJldHVybiByYW5kb21faHNsX2NvbG9yKDUwLCA5MCk7XG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAodHlwZW9mIHNldHRpbmdzLmNvbG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZ2V0VGV4dENvbG9yID0gc2V0dGluZ3MuY29sb3I7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgLyogSW50ZXJhY3RpdmUgKi9cbiAgICB2YXIgaW50ZXJhY3RpdmUgPSBmYWxzZTtcbiAgICB2YXIgaW5mb0dyaWQgPSBbXTtcbiAgICB2YXIgaG92ZXJlZDtcblxuICAgIHZhciBnZXRJbmZvR3JpZEZyb21Nb3VzZUV2ZW50ID0gZnVuY3Rpb24gZ2V0SW5mb0dyaWRGcm9tTW91c2VFdmVudChldnQpIHtcbiAgICAgIHZhciBjYW52YXMgPSBldnQuY3VycmVudFRhcmdldDtcbiAgICAgIHZhciByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgdmFyIGV2ZW50WCA9IGV2dC5jbGllbnRYIC0gcmVjdC5sZWZ0O1xuICAgICAgdmFyIGV2ZW50WSA9IGV2dC5jbGllbnRZIC0gcmVjdC50b3A7XG5cbiAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihldmVudFggKiAoKGNhbnZhcy53aWR0aCAvIHJlY3Qud2lkdGgpIHx8IDEpIC8gZyk7XG4gICAgICB2YXIgeSA9IE1hdGguZmxvb3IoZXZlbnRZICogKChjYW52YXMuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpIHx8IDEpIC8gZyk7XG5cbiAgICAgIHJldHVybiBpbmZvR3JpZFt4XVt5XTtcbiAgICB9O1xuXG4gICAgdmFyIHdvcmRjbG91ZGhvdmVyID0gZnVuY3Rpb24gd29yZGNsb3VkaG92ZXIoZXZ0KSB7XG4gICAgICB2YXIgaW5mbyA9IGdldEluZm9HcmlkRnJvbU1vdXNlRXZlbnQoZXZ0KTtcblxuICAgICAgaWYgKGhvdmVyZWQgPT09IGluZm8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBob3ZlcmVkID0gaW5mbztcbiAgICAgIGlmICghaW5mbykge1xuICAgICAgICBzZXR0aW5ncy5ob3Zlcih1bmRlZmluZWQsIHVuZGVmaW5lZCwgZXZ0KTtcblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldHRpbmdzLmhvdmVyKGluZm8uaXRlbSwgaW5mby5kaW1lbnNpb24sIGV2dCk7XG5cbiAgICB9O1xuXG4gICAgdmFyIHdvcmRjbG91ZGNsaWNrID0gZnVuY3Rpb24gd29yZGNsb3VkY2xpY2soZXZ0KSB7XG4gICAgICB2YXIgaW5mbyA9IGdldEluZm9HcmlkRnJvbU1vdXNlRXZlbnQoZXZ0KTtcbiAgICAgIGlmICghaW5mbykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldHRpbmdzLmNsaWNrKGluZm8uaXRlbSwgaW5mby5kaW1lbnNpb24sIGV2dCk7XG4gICAgfTtcblxuICAgIC8qIEdldCBwb2ludHMgb24gdGhlIGdyaWQgZm9yIGEgZ2l2ZW4gcmFkaXVzIGF3YXkgZnJvbSB0aGUgY2VudGVyICovXG4gICAgdmFyIHBvaW50c0F0UmFkaXVzID0gW107XG4gICAgdmFyIGdldFBvaW50c0F0UmFkaXVzID0gZnVuY3Rpb24gZ2V0UG9pbnRzQXRSYWRpdXMocmFkaXVzKSB7XG4gICAgICBpZiAocG9pbnRzQXRSYWRpdXNbcmFkaXVzXSkge1xuICAgICAgICByZXR1cm4gcG9pbnRzQXRSYWRpdXNbcmFkaXVzXTtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vayBmb3IgdGhlc2UgbnVtYmVyIG9mIHBvaW50cyBvbiBlYWNoIHJhZGl1c1xuICAgICAgdmFyIFQgPSByYWRpdXMgKiA4O1xuXG4gICAgICAvLyBHZXR0aW5nIGFsbCB0aGUgcG9pbnRzIGF0IHRoaXMgcmFkaXVzXG4gICAgICB2YXIgdCA9IFQ7XG4gICAgICB2YXIgcG9pbnRzID0gW107XG5cbiAgICAgIGlmIChyYWRpdXMgPT09IDApIHtcbiAgICAgICAgcG9pbnRzLnB1c2goW2NlbnRlclswXSwgY2VudGVyWzFdLCAwXSk7XG4gICAgICB9XG5cbiAgICAgIHdoaWxlICh0LS0pIHtcbiAgICAgICAgLy8gZGlzdG9ydCB0aGUgcmFkaXVzIHRvIHB1dCB0aGUgY2xvdWQgaW4gc2hhcGVcbiAgICAgICAgdmFyIHJ4ID0gMTtcbiAgICAgICAgaWYgKHNldHRpbmdzLnNoYXBlICE9PSAnY2lyY2xlJykge1xuICAgICAgICAgIHJ4ID0gc2V0dGluZ3Muc2hhcGUodCAvIFQgKiAyICogTWF0aC5QSSk7IC8vIDAgdG8gMVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHVzaCBbeCwgeSwgdF07IHQgaXMgdXNlZCBzb2xlbHkgZm9yIGdldFRleHRDb2xvcigpXG4gICAgICAgIHBvaW50cy5wdXNoKFtcbiAgICAgICAgICBjZW50ZXJbMF0gKyByYWRpdXMgKiByeCAqIE1hdGguY29zKC10IC8gVCAqIDIgKiBNYXRoLlBJKSxcbiAgICAgICAgICBjZW50ZXJbMV0gKyByYWRpdXMgKiByeCAqIE1hdGguc2luKC10IC8gVCAqIDIgKiBNYXRoLlBJKSAqXG4gICAgICAgICAgICBzZXR0aW5ncy5lbGxpcHRpY2l0eSxcbiAgICAgICAgICB0IC8gVCAqIDIgKiBNYXRoLlBJXSk7XG4gICAgICB9XG5cbiAgICAgIHBvaW50c0F0UmFkaXVzW3JhZGl1c10gPSBwb2ludHM7XG4gICAgICByZXR1cm4gcG9pbnRzO1xuICAgIH07XG5cbiAgICAvKiBSZXR1cm4gdHJ1ZSBpZiB3ZSBoYWQgc3BlbnQgdG9vIG11Y2ggdGltZSAqL1xuICAgIHZhciBleGNlZWRUaW1lID0gZnVuY3Rpb24gZXhjZWVkVGltZSgpIHtcbiAgICAgIHJldHVybiAoKHNldHRpbmdzLmFib3J0VGhyZXNob2xkID4gMCkgJiZcbiAgICAgICAgKChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLSBlc2NhcGVUaW1lID4gc2V0dGluZ3MuYWJvcnRUaHJlc2hvbGQpKTtcbiAgICB9O1xuXG4gICAgLyogR2V0IHRoZSBkZWcgb2Ygcm90YXRpb24gYWNjb3JkaW5nIHRvIHNldHRpbmdzLCBhbmQgbHVjay4gKi9cbiAgICB2YXIgZ2V0Um90YXRlRGVnID0gZnVuY3Rpb24gZ2V0Um90YXRlRGVnKCkge1xuICAgICAgaWYgKHNldHRpbmdzLnJvdGF0ZVJhdGlvID09PSAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IHNldHRpbmdzLnJvdGF0ZVJhdGlvKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuXG4gICAgICBpZiAocm90YXRpb25SYW5nZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbWluUm90YXRpb247XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBtaW5Sb3RhdGlvbiArIE1hdGgucmFuZG9tKCkgKiByb3RhdGlvblJhbmdlO1xuICAgIH07XG5cbiAgICB2YXIgZ2V0VGV4dEluZm8gPSBmdW5jdGlvbiBnZXRUZXh0SW5mbyh3b3JkLCB3ZWlnaHQsIHJvdGF0ZURlZykge1xuICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhY3V0YWwgZm9udCBzaXplXG4gICAgICAvLyBmb250U2l6ZSA9PT0gMCBtZWFucyB3ZWlnaHRGYWN0b3IgZnVuY3Rpb24gd2FudHMgdGhlIHRleHQgc2tpcHBlZCxcbiAgICAgIC8vIGFuZCBzaXplIDwgbWluU2l6ZSBtZWFucyB3ZSBjYW5ub3QgZHJhdyB0aGUgdGV4dC5cbiAgICAgIHZhciBkZWJ1ZyA9IGZhbHNlO1xuICAgICAgdmFyIGZvbnRTaXplID0gc2V0dGluZ3Mud2VpZ2h0RmFjdG9yKHdlaWdodCk7XG4gICAgICBpZiAoZm9udFNpemUgPD0gc2V0dGluZ3MubWluU2l6ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIFNjYWxlIGZhY3RvciBoZXJlIGlzIHRvIG1ha2Ugc3VyZSBmaWxsVGV4dCBpcyBub3QgbGltaXRlZCBieVxuICAgICAgLy8gdGhlIG1pbml1bSBmb250IHNpemUgc2V0IGJ5IGJyb3dzZXIuXG4gICAgICAvLyBJdCB3aWxsIGFsd2F5cyBiZSAxIG9yIDJuLlxuICAgICAgdmFyIG11ID0gMTtcbiAgICAgIGlmIChmb250U2l6ZSA8IG1pbml1bUZvbnRTaXplKSB7XG4gICAgICAgIG11ID0gKGZ1bmN0aW9uIGNhbGN1bGF0ZVNjYWxlRmFjdG9yKCkge1xuICAgICAgICAgIHZhciBtdSA9IDI7XG4gICAgICAgICAgd2hpbGUgKG11ICogZm9udFNpemUgPCBtaW5pdW1Gb250U2l6ZSkge1xuICAgICAgICAgICAgbXUgKz0gMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG11O1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgdmFyIGZjdHggPSBmY2FudmFzLmdldENvbnRleHQoJzJkJywgeyB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUgfSk7XG5cbiAgICAgIGZjdHguZm9udCA9IHNldHRpbmdzLmZvbnRXZWlnaHQgKyAnICcgK1xuICAgICAgICAoZm9udFNpemUgKiBtdSkudG9TdHJpbmcoMTApICsgJ3B4ICcgKyBzZXR0aW5ncy5mb250RmFtaWx5O1xuXG4gICAgICAvLyBFc3RpbWF0ZSB0aGUgZGltZW5zaW9uIG9mIHRoZSB0ZXh0IHdpdGggbWVhc3VyZVRleHQoKS5cbiAgICAgIHZhciBmdyA9IGZjdHgubWVhc3VyZVRleHQod29yZCkud2lkdGggLyBtdTtcbiAgICAgIHZhciBmaCA9IE1hdGgubWF4KGZvbnRTaXplICogbXUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmY3R4Lm1lYXN1cmVUZXh0KCdtJykud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBmY3R4Lm1lYXN1cmVUZXh0KCdcXHVGRjM3Jykud2lkdGgpIC8gbXU7XG5cbiAgICAgIC8vIENyZWF0ZSBhIGJvdW5kYXJ5IGJveCB0aGF0IGlzIGxhcmdlciB0aGFuIG91ciBlc3RpbWF0ZXMsXG4gICAgICAvLyBzbyB0ZXh0IGRvbid0IGdldCBjdXQgb2YgKGl0IHNpbGwgbWlnaHQpXG4gICAgICB2YXIgYm94V2lkdGggPSBmdyArIGZoICogMjtcbiAgICAgIHZhciBib3hIZWlnaHQgPSBmaCAqIDM7XG4gICAgICB2YXIgZmd3ID0gTWF0aC5jZWlsKGJveFdpZHRoIC8gZyk7XG4gICAgICB2YXIgZmdoID0gTWF0aC5jZWlsKGJveEhlaWdodCAvIGcpO1xuICAgICAgYm94V2lkdGggPSBmZ3cgKiBnO1xuICAgICAgYm94SGVpZ2h0ID0gZmdoICogZztcblxuICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBwcm9wZXIgb2Zmc2V0cyB0byBtYWtlIHRoZSB0ZXh0IGNlbnRlcmVkIGF0XG4gICAgICAvLyB0aGUgcHJlZmVycmVkIHBvc2l0aW9uLlxuXG4gICAgICAvLyBUaGlzIGlzIHNpbXBseSBoYWxmIG9mIHRoZSB3aWR0aC5cbiAgICAgIHZhciBmaWxsVGV4dE9mZnNldFggPSAtIGZ3IC8gMjtcbiAgICAgIC8vIEluc3RlYWQgb2YgbW92aW5nIHRoZSBib3ggdG8gdGhlIGV4YWN0IG1pZGRsZSBvZiB0aGUgcHJlZmVycmVkXG4gICAgICAvLyBwb3NpdGlvbiwgZm9yIFktb2Zmc2V0IHdlIG1vdmUgMC40IGluc3RlYWQsIHNvIExhdGluIGFscGhhYmV0cyBsb29rXG4gICAgICAvLyB2ZXJ0aWNhbCBjZW50ZXJlZC5cbiAgICAgIHZhciBmaWxsVGV4dE9mZnNldFkgPSAtIGZoICogMC40O1xuXG4gICAgICAvLyBDYWxjdWxhdGUgdGhlIGFjdHVhbCBkaW1lbnNpb24gb2YgdGhlIGNhbnZhcywgY29uc2lkZXJpbmcgdGhlIHJvdGF0aW9uLlxuICAgICAgdmFyIGNnaCA9IE1hdGguY2VpbCgoYm94V2lkdGggKiBNYXRoLmFicyhNYXRoLnNpbihyb3RhdGVEZWcpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBib3hIZWlnaHQgKiBNYXRoLmFicyhNYXRoLmNvcyhyb3RhdGVEZWcpKSkgLyBnKTtcbiAgICAgIHZhciBjZ3cgPSBNYXRoLmNlaWwoKGJveFdpZHRoICogTWF0aC5hYnMoTWF0aC5jb3Mocm90YXRlRGVnKSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94SGVpZ2h0ICogTWF0aC5hYnMoTWF0aC5zaW4ocm90YXRlRGVnKSkpIC8gZyk7XG4gICAgICB2YXIgd2lkdGggPSBjZ3cgKiBnO1xuICAgICAgdmFyIGhlaWdodCA9IGNnaCAqIGc7XG5cbiAgICAgIGZjYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHdpZHRoKTtcbiAgICAgIGZjYW52YXMuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBoZWlnaHQpO1xuXG4gICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgLy8gQXR0YWNoIGZjYW52YXMgdG8gdGhlIERPTVxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZjYW52YXMpO1xuICAgICAgICAvLyBTYXZlIGl0J3Mgc3RhdGUgc28gdGhhdCB3ZSBjb3VsZCByZXN0b3JlIGFuZCBkcmF3IHRoZSBncmlkIGNvcnJlY3RseS5cbiAgICAgICAgZmN0eC5zYXZlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNjYWxlIHRoZSBjYW52YXMgd2l0aCB8bXV8LlxuICAgICAgZmN0eC5zY2FsZSgxIC8gbXUsIDEgLyBtdSk7XG4gICAgICBmY3R4LnRyYW5zbGF0ZSh3aWR0aCAqIG11IC8gMiwgaGVpZ2h0ICogbXUgLyAyKTtcbiAgICAgIGZjdHgucm90YXRlKC0gcm90YXRlRGVnKTtcblxuICAgICAgLy8gT25jZSB0aGUgd2lkdGgvaGVpZ2h0IGlzIHNldCwgY3R4IGluZm8gd2lsbCBiZSByZXNldC5cbiAgICAgIC8vIFNldCBpdCBhZ2FpbiBoZXJlLlxuICAgICAgZmN0eC5mb250ID0gc2V0dGluZ3MuZm9udFdlaWdodCArICcgJyArXG4gICAgICAgIChmb250U2l6ZSAqIG11KS50b1N0cmluZygxMCkgKyAncHggJyArIHNldHRpbmdzLmZvbnRGYW1pbHk7XG5cbiAgICAgIC8vIEZpbGwgdGhlIHRleHQgaW50byB0aGUgZmNhbnZhcy5cbiAgICAgIC8vIFhYWDogV2UgY2Fubm90IGJlY2F1c2UgdGV4dEJhc2VsaW5lID0gJ3RvcCcgaGVyZSBiZWNhdXNlXG4gICAgICAvLyBGaXJlZm94IGFuZCBDaHJvbWUgdXNlcyBkaWZmZXJlbnQgZGVmYXVsdCBsaW5lLWhlaWdodCBmb3IgY2FudmFzLlxuICAgICAgLy8gUGxlYXNlIHJlYWQgaHR0cHM6Ly9idWd6aWwubGEvNzM3ODUyI2M2LlxuICAgICAgLy8gSGVyZSwgd2UgdXNlIHRleHRCYXNlbGluZSA9ICdtaWRkbGUnIGFuZCBkcmF3IHRoZSB0ZXh0IGF0IGV4YWN0bHlcbiAgICAgIC8vIDAuNSAqIGZvbnRTaXplIGxvd2VyLlxuICAgICAgZmN0eC5maWxsU3R5bGUgPSAnIzAwMCc7XG4gICAgICBmY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuICAgICAgZmN0eC5maWxsVGV4dCh3b3JkLCBmaWxsVGV4dE9mZnNldFggKiBtdSxcbiAgICAgICAgICAgICAgICAgICAgKGZpbGxUZXh0T2Zmc2V0WSArIGZvbnRTaXplICogMC41KSAqIG11KTtcblxuICAgICAgLy8gR2V0IHRoZSBwaXhlbHMgb2YgdGhlIHRleHRcbiAgICAgIHZhciBpbWFnZURhdGEgPSBmY3R4LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KS5kYXRhO1xuXG4gICAgICBpZiAoZXhjZWVkVGltZSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIC8vIERyYXcgdGhlIGJveCBvZiB0aGUgb3JpZ2luYWwgZXN0aW1hdGlvblxuICAgICAgICBmY3R4LnN0cm9rZVJlY3QoZmlsbFRleHRPZmZzZXRYICogbXUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsVGV4dE9mZnNldFksIGZ3ICogbXUsIGZoICogbXUpO1xuICAgICAgICBmY3R4LnJlc3RvcmUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVhZCB0aGUgcGl4ZWxzIGFuZCBzYXZlIHRoZSBpbmZvcm1hdGlvbiB0byB0aGUgb2NjdXBpZWQgYXJyYXlcbiAgICAgIHZhciBvY2N1cGllZCA9IFtdO1xuICAgICAgdmFyIGd4ID0gY2d3LCBneSwgeCwgeTtcbiAgICAgIHZhciBib3VuZHMgPSBbY2doIC8gMiwgY2d3IC8gMiwgY2doIC8gMiwgY2d3IC8gMl07XG4gICAgICB3aGlsZSAoZ3gtLSkge1xuICAgICAgICBneSA9IGNnaDtcbiAgICAgICAgd2hpbGUgKGd5LS0pIHtcbiAgICAgICAgICB5ID0gZztcbiAgICAgICAgICBzaW5nbGVHcmlkTG9vcDoge1xuICAgICAgICAgICAgd2hpbGUgKHktLSkge1xuICAgICAgICAgICAgICB4ID0gZztcbiAgICAgICAgICAgICAgd2hpbGUgKHgtLSkge1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZURhdGFbKChneSAqIGcgKyB5KSAqIHdpZHRoICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZ3ggKiBnICsgeCkpICogNCArIDNdKSB7XG4gICAgICAgICAgICAgICAgICBvY2N1cGllZC5wdXNoKFtneCwgZ3ldKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKGd4IDwgYm91bmRzWzNdKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kc1szXSA9IGd4O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKGd4ID4gYm91bmRzWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kc1sxXSA9IGd4O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKGd5IDwgYm91bmRzWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kc1swXSA9IGd5O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKGd5ID4gYm91bmRzWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvdW5kc1syXSA9IGd5O1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgZmN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDAsIDAsIDAuNSknO1xuICAgICAgICAgICAgICAgICAgICBmY3R4LmZpbGxSZWN0KGd4ICogZywgZ3kgKiBnLCBnIC0gMC41LCBnIC0gMC41KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGJyZWFrIHNpbmdsZUdyaWRMb29wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgICAgICAgIGZjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMjU1LCAwLjUpJztcbiAgICAgICAgICAgICAgZmN0eC5maWxsUmVjdChneCAqIGcsIGd5ICogZywgZyAtIDAuNSwgZyAtIDAuNSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChkZWJ1Zykge1xuICAgICAgICBmY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDI1NSwgMCwgMC41KSc7XG4gICAgICAgIGZjdHguZmlsbFJlY3QoYm91bmRzWzNdICogZyxcbiAgICAgICAgICAgICAgICAgICAgICBib3VuZHNbMF0gKiBnLFxuICAgICAgICAgICAgICAgICAgICAgIChib3VuZHNbMV0gLSBib3VuZHNbM10gKyAxKSAqIGcsXG4gICAgICAgICAgICAgICAgICAgICAgKGJvdW5kc1syXSAtIGJvdW5kc1swXSArIDEpICogZyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiBpbmZvcm1hdGlvbiBuZWVkZWQgdG8gY3JlYXRlIHRoZSB0ZXh0IG9uIHRoZSByZWFsIGNhbnZhc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbXU6IG11LFxuICAgICAgICBvY2N1cGllZDogb2NjdXBpZWQsXG4gICAgICAgIGJvdW5kczogYm91bmRzLFxuICAgICAgICBndzogY2d3LFxuICAgICAgICBnaDogY2doLFxuICAgICAgICBmaWxsVGV4dE9mZnNldFg6IGZpbGxUZXh0T2Zmc2V0WCxcbiAgICAgICAgZmlsbFRleHRPZmZzZXRZOiBmaWxsVGV4dE9mZnNldFksXG4gICAgICAgIGZpbGxUZXh0V2lkdGg6IGZ3LFxuICAgICAgICBmaWxsVGV4dEhlaWdodDogZmgsXG4gICAgICAgIGZvbnRTaXplOiBmb250U2l6ZVxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyogRGV0ZXJtaW5lIGlmIHRoZXJlIGlzIHJvb20gYXZhaWxhYmxlIGluIHRoZSBnaXZlbiBkaW1lbnNpb24gKi9cbiAgICB2YXIgY2FuRml0VGV4dCA9IGZ1bmN0aW9uIGNhbkZpdFRleHQoZ3gsIGd5LCBndywgZ2gsIG9jY3VwaWVkKSB7XG4gICAgICAvLyBHbyB0aHJvdWdoIHRoZSBvY2N1cGllZCBwb2ludHMsXG4gICAgICAvLyByZXR1cm4gZmFsc2UgaWYgdGhlIHNwYWNlIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICB2YXIgaSA9IG9jY3VwaWVkLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdmFyIHB4ID0gZ3ggKyBvY2N1cGllZFtpXVswXTtcbiAgICAgICAgdmFyIHB5ID0gZ3kgKyBvY2N1cGllZFtpXVsxXTtcblxuICAgICAgICBpZiAocHggPj0gbmd4IHx8IHB5ID49IG5neSB8fCBweCA8IDAgfHwgcHkgPCAwIHx8ICFncmlkW3B4XVtweV0pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICAvKiBBY3R1YWxseSBkcmF3IHRoZSB0ZXh0IG9uIHRoZSBncmlkICovXG4gICAgdmFyIGRyYXdUZXh0ID0gZnVuY3Rpb24gZHJhd1RleHQoZ3gsIGd5LCBpbmZvLCB3b3JkLCB3ZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UsIHRoZXRhLCByb3RhdGVEZWcsIGF0dHJpYnV0ZXMpIHtcblxuICAgICAgdmFyIGZvbnRTaXplID0gaW5mby5mb250U2l6ZTtcbiAgICAgIHZhciBjb2xvcjtcbiAgICAgIGlmIChnZXRUZXh0Q29sb3IpIHtcbiAgICAgICAgY29sb3IgPSBnZXRUZXh0Q29sb3Iod29yZCwgd2VpZ2h0LCBmb250U2l6ZSwgZGlzdGFuY2UsIHRoZXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbG9yID0gc2V0dGluZ3MuY29sb3I7XG4gICAgICB9XG5cbiAgICAgIHZhciBkaW1lbnNpb247XG4gICAgICB2YXIgYm91bmRzID0gaW5mby5ib3VuZHM7XG4gICAgICBkaW1lbnNpb24gPSB7XG4gICAgICAgIHg6IChneCArIGJvdW5kc1szXSkgKiBnLFxuICAgICAgICB5OiAoZ3kgKyBib3VuZHNbMF0pICogZyxcbiAgICAgICAgdzogKGJvdW5kc1sxXSAtIGJvdW5kc1szXSArIDEpICogZyxcbiAgICAgICAgaDogKGJvdW5kc1syXSAtIGJvdW5kc1swXSArIDEpICogZ1xuICAgICAgfTtcblxuICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgICAgICBpZiAoZWwuZ2V0Q29udGV4dCkge1xuICAgICAgICAgIHZhciBjdHggPSBlbC5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgIHZhciBtdSA9IGluZm8ubXU7XG5cbiAgICAgICAgICAvLyBTYXZlIHRoZSBjdXJyZW50IHN0YXRlIGJlZm9yZSBtZXNzaW5nIGl0XG4gICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICBjdHguc2NhbGUoMSAvIG11LCAxIC8gbXUpO1xuXG4gICAgICAgICAgY3R4LmZvbnQgPSBzZXR0aW5ncy5mb250V2VpZ2h0ICsgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgIChmb250U2l6ZSAqIG11KS50b1N0cmluZygxMCkgKyAncHggJyArIHNldHRpbmdzLmZvbnRGYW1pbHk7XG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuXG4gICAgICAgICAgLy8gVHJhbnNsYXRlIHRoZSBjYW52YXMgcG9zaXRpb24gdG8gdGhlIG9yaWdpbiBjb29yZGluYXRlIG9mIHdoZXJlXG4gICAgICAgICAgLy8gdGhlIHRleHQgc2hvdWxkIGJlIHB1dC5cbiAgICAgICAgICBjdHgudHJhbnNsYXRlKChneCArIGluZm8uZ3cgLyAyKSAqIGcgKiBtdSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChneSArIGluZm8uZ2ggLyAyKSAqIGcgKiBtdSk7XG5cbiAgICAgICAgICBpZiAocm90YXRlRGVnICE9PSAwKSB7XG4gICAgICAgICAgICBjdHgucm90YXRlKC0gcm90YXRlRGVnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBGaW5hbGx5LCBmaWxsIHRoZSB0ZXh0LlxuXG4gICAgICAgICAgLy8gWFhYOiBXZSBjYW5ub3QgYmVjYXVzZSB0ZXh0QmFzZWxpbmUgPSAndG9wJyBoZXJlIGJlY2F1c2VcbiAgICAgICAgICAvLyBGaXJlZm94IGFuZCBDaHJvbWUgdXNlcyBkaWZmZXJlbnQgZGVmYXVsdCBsaW5lLWhlaWdodCBmb3IgY2FudmFzLlxuICAgICAgICAgIC8vIFBsZWFzZSByZWFkIGh0dHBzOi8vYnVnemlsLmxhLzczNzg1MiNjNi5cbiAgICAgICAgICAvLyBIZXJlLCB3ZSB1c2UgdGV4dEJhc2VsaW5lID0gJ21pZGRsZScgYW5kIGRyYXcgdGhlIHRleHQgYXQgZXhhY3RseVxuICAgICAgICAgIC8vIDAuNSAqIGZvbnRTaXplIGxvd2VyLlxuICAgICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgICBjdHguZmlsbFRleHQod29yZCwgaW5mby5maWxsVGV4dE9mZnNldFggKiBtdSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGluZm8uZmlsbFRleHRPZmZzZXRZICsgZm9udFNpemUgKiAwLjUpICogbXUpO1xuXG4gICAgICAgICAgLy8gVGhlIGJlbG93IGJveCBpcyBhbHdheXMgbWF0Y2hlcyBob3cgPHNwYW4+cyBhcmUgcG9zaXRpb25lZFxuICAgICAgICAgIC8qIGN0eC5zdHJva2VSZWN0KGluZm8uZmlsbFRleHRPZmZzZXRYLCBpbmZvLmZpbGxUZXh0T2Zmc2V0WSxcbiAgICAgICAgICAgIGluZm8uZmlsbFRleHRXaWR0aCwgaW5mby5maWxsVGV4dEhlaWdodCk7ICovXG5cbiAgICAgICAgICAvLyBSZXN0b3JlIHRoZSBzdGF0ZS5cbiAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGRyYXdUZXh0IG9uIERJViBlbGVtZW50XG4gICAgICAgICAgdmFyIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgdmFyIHRyYW5zZm9ybVJ1bGUgPSAnJztcbiAgICAgICAgICB0cmFuc2Zvcm1SdWxlID0gJ3JvdGF0ZSgnICsgKC0gcm90YXRlRGVnIC8gTWF0aC5QSSAqIDE4MCkgKyAnZGVnKSAnO1xuICAgICAgICAgIGlmIChpbmZvLm11ICE9PSAxKSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1SdWxlICs9XG4gICAgICAgICAgICAgICd0cmFuc2xhdGVYKC0nICsgKGluZm8uZmlsbFRleHRXaWR0aCAvIDQpICsgJ3B4KSAnICtcbiAgICAgICAgICAgICAgJ3NjYWxlKCcgKyAoMSAvIGluZm8ubXUpICsgJyknO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgc3R5bGVSdWxlcyA9IHtcbiAgICAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAnZGlzcGxheSc6ICdibG9jaycsXG4gICAgICAgICAgICAnZm9udCc6IHNldHRpbmdzLmZvbnRXZWlnaHQgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAoZm9udFNpemUgKiBpbmZvLm11KSArICdweCAnICsgc2V0dGluZ3MuZm9udEZhbWlseSxcbiAgICAgICAgICAgICdsZWZ0JzogKChneCArIGluZm8uZ3cgLyAyKSAqIGcgKyBpbmZvLmZpbGxUZXh0T2Zmc2V0WCkgKyAncHgnLFxuICAgICAgICAgICAgJ3RvcCc6ICgoZ3kgKyBpbmZvLmdoIC8gMikgKiBnICsgaW5mby5maWxsVGV4dE9mZnNldFkpICsgJ3B4JyxcbiAgICAgICAgICAgICd3aWR0aCc6IGluZm8uZmlsbFRleHRXaWR0aCArICdweCcsXG4gICAgICAgICAgICAnaGVpZ2h0JzogaW5mby5maWxsVGV4dEhlaWdodCArICdweCcsXG4gICAgICAgICAgICAnY29sb3InOiBjb2xvcixcbiAgICAgICAgICAgICdsaW5lSGVpZ2h0JzogZm9udFNpemUgKyAncHgnLFxuICAgICAgICAgICAgJ3doaXRlU3BhY2UnOiAnbm93cmFwJyxcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiB0cmFuc2Zvcm1SdWxlLFxuICAgICAgICAgICAgJ3dlYmtpdFRyYW5zZm9ybSc6IHRyYW5zZm9ybVJ1bGUsXG4gICAgICAgICAgICAnbXNUcmFuc2Zvcm0nOiB0cmFuc2Zvcm1SdWxlLFxuICAgICAgICAgICAgJ3RyYW5zZm9ybU9yaWdpbic6ICc1MCUgNDAlJyxcbiAgICAgICAgICAgICd3ZWJraXRUcmFuc2Zvcm1PcmlnaW4nOiAnNTAlIDQwJScsXG4gICAgICAgICAgICAnbXNUcmFuc2Zvcm1PcmlnaW4nOiAnNTAlIDQwJSdcbiAgICAgICAgICB9O1xuICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSB3b3JkO1xuICAgICAgICAgIGZvciAodmFyIGNzc1Byb3AgaW4gc3R5bGVSdWxlcykge1xuICAgICAgICAgICAgc3Bhbi5zdHlsZVtjc3NQcm9wXSA9IHN0eWxlUnVsZXNbY3NzUHJvcF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhdHRyaWJ1dGUgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIGF0dHJpYnV0ZXNbYXR0cmlidXRlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyogSGVscCBmdW5jdGlvbiB0byB1cGRhdGVHcmlkICovXG4gICAgdmFyIGZpbGxHcmlkQXQgPSBmdW5jdGlvbiBmaWxsR3JpZEF0KHgsIHksIGRyYXdNYXNrLCBkaW1lbnNpb24sIGl0ZW0pIHtcbiAgICAgIGlmICh4ID49IG5neCB8fCB5ID49IG5neSB8fCB4IDwgMCB8fCB5IDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGdyaWRbeF1beV0gPSBmYWxzZTtcblxuICAgICAgaWYgKGRyYXdNYXNrKSB7XG4gICAgICAgIHZhciBjdHggPSBlbGVtZW50c1swXS5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguZmlsbFJlY3QoeCAqIGcsIHkgKiBnLCBtYXNrUmVjdFdpZHRoLCBtYXNrUmVjdFdpZHRoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGludGVyYWN0aXZlKSB7XG4gICAgICAgIGluZm9HcmlkW3hdW3ldID0geyBpdGVtOiBpdGVtLCBkaW1lbnNpb246IGRpbWVuc2lvbiB9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKiBVcGRhdGUgdGhlIGZpbGxpbmcgaW5mb3JtYXRpb24gb2YgdGhlIGdpdmVuIHNwYWNlIHdpdGggb2NjdXBpZWQgcG9pbnRzLlxuICAgICAgIERyYXcgdGhlIG1hc2sgb24gdGhlIGNhbnZhcyBpZiBuZWNlc3NhcnkuICovXG4gICAgdmFyIHVwZGF0ZUdyaWQgPSBmdW5jdGlvbiB1cGRhdGVHcmlkKGd4LCBneSwgZ3csIGdoLCBpbmZvLCBpdGVtKSB7XG4gICAgICB2YXIgb2NjdXBpZWQgPSBpbmZvLm9jY3VwaWVkO1xuICAgICAgdmFyIGRyYXdNYXNrID0gc2V0dGluZ3MuZHJhd01hc2s7XG4gICAgICB2YXIgY3R4O1xuICAgICAgaWYgKGRyYXdNYXNrKSB7XG4gICAgICAgIGN0eCA9IGVsZW1lbnRzWzBdLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzZXR0aW5ncy5tYXNrQ29sb3I7XG4gICAgICB9XG5cbiAgICAgIHZhciBkaW1lbnNpb247XG4gICAgICBpZiAoaW50ZXJhY3RpdmUpIHtcbiAgICAgICAgdmFyIGJvdW5kcyA9IGluZm8uYm91bmRzO1xuICAgICAgICBkaW1lbnNpb24gPSB7XG4gICAgICAgICAgeDogKGd4ICsgYm91bmRzWzNdKSAqIGcsXG4gICAgICAgICAgeTogKGd5ICsgYm91bmRzWzBdKSAqIGcsXG4gICAgICAgICAgdzogKGJvdW5kc1sxXSAtIGJvdW5kc1szXSArIDEpICogZyxcbiAgICAgICAgICBoOiAoYm91bmRzWzJdIC0gYm91bmRzWzBdICsgMSkgKiBnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHZhciBpID0gb2NjdXBpZWQubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBmaWxsR3JpZEF0KGd4ICsgb2NjdXBpZWRbaV1bMF0sIGd5ICsgb2NjdXBpZWRbaV1bMV0sXG4gICAgICAgICAgICAgICAgICAgZHJhd01hc2ssIGRpbWVuc2lvbiwgaXRlbSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkcmF3TWFzaykge1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKiBwdXRXb3JkKCkgcHJvY2Vzc2VzIGVhY2ggaXRlbSBvbiB0aGUgbGlzdCxcbiAgICAgICBjYWxjdWxhdGUgaXQncyBzaXplIGFuZCBkZXRlcm1pbmUgaXQncyBwb3NpdGlvbiwgYW5kIGFjdHVhbGx5XG4gICAgICAgcHV0IGl0IG9uIHRoZSBjYW52YXMuICovXG4gICAgdmFyIHB1dFdvcmQgPSBmdW5jdGlvbiBwdXRXb3JkKGl0ZW0pIHtcbiAgICAgIHZhciB3b3JkLCB3ZWlnaHQsIGF0dHJpYnV0ZXM7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgICB3b3JkID0gaXRlbVswXTtcbiAgICAgICAgd2VpZ2h0ID0gaXRlbVsxXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdvcmQgPSBpdGVtLndvcmQ7XG4gICAgICAgIHdlaWdodCA9IGl0ZW0ud2VpZ2h0O1xuICAgICAgICBhdHRyaWJ1dGVzID0gaXRlbS5hdHRyaWJ1dGVzO1xuICAgICAgfVxuICAgICAgdmFyIHJvdGF0ZURlZyA9IGdldFJvdGF0ZURlZygpO1xuXG4gICAgICAvLyBnZXQgaW5mbyBuZWVkZWQgdG8gcHV0IHRoZSB0ZXh0IG9udG8gdGhlIGNhbnZhc1xuICAgICAgdmFyIGluZm8gPSBnZXRUZXh0SW5mbyh3b3JkLCB3ZWlnaHQsIHJvdGF0ZURlZyk7XG5cbiAgICAgIC8vIG5vdCBnZXR0aW5nIHRoZSBpbmZvIG1lYW5zIHdlIHNob3VsZG4ndCBiZSBkcmF3aW5nIHRoaXMgb25lLlxuICAgICAgaWYgKCFpbmZvKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV4Y2VlZFRpbWUoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIFNraXAgdGhlIGxvb3AgaWYgd2UgaGF2ZSBhbHJlYWR5IGtub3cgdGhlIGJvdW5kaW5nIGJveCBvZlxuICAgICAgLy8gd29yZCBpcyBsYXJnZXIgdGhhbiB0aGUgY2FudmFzLlxuICAgICAgdmFyIGJvdW5kcyA9IGluZm8uYm91bmRzO1xuICAgICAgaWYgKChib3VuZHNbMV0gLSBib3VuZHNbM10gKyAxKSA+IG5neCB8fFxuICAgICAgICAoYm91bmRzWzJdIC0gYm91bmRzWzBdICsgMSkgPiBuZ3kpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIHRvIHB1dCB0aGUgdGV4dCBieVxuICAgICAgLy8gc3RhcnQgbG9va2luZyBmb3IgdGhlIG5lYXJlc3QgcG9pbnRzXG4gICAgICB2YXIgciA9IG1heFJhZGl1cyArIDE7XG5cbiAgICAgIHZhciB0cnlUb1B1dFdvcmRBdFBvaW50ID0gZnVuY3Rpb24oZ3h5KSB7XG4gICAgICAgIHZhciBneCA9IE1hdGguZmxvb3IoZ3h5WzBdIC0gaW5mby5ndyAvIDIpO1xuICAgICAgICB2YXIgZ3kgPSBNYXRoLmZsb29yKGd4eVsxXSAtIGluZm8uZ2ggLyAyKTtcbiAgICAgICAgdmFyIGd3ID0gaW5mby5ndztcbiAgICAgICAgdmFyIGdoID0gaW5mby5naDtcblxuICAgICAgICAvLyBJZiB3ZSBjYW5ub3QgZml0IHRoZSB0ZXh0IGF0IHRoaXMgcG9zaXRpb24sIHJldHVybiBmYWxzZVxuICAgICAgICAvLyBhbmQgZ28gdG8gdGhlIG5leHQgcG9zaXRpb24uXG4gICAgICAgIGlmICghY2FuRml0VGV4dChneCwgZ3ksIGd3LCBnaCwgaW5mby5vY2N1cGllZCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBY3R1YWxseSBwdXQgdGhlIHRleHQgb24gdGhlIGNhbnZhc1xuICAgICAgICBkcmF3VGV4dChneCwgZ3ksIGluZm8sIHdvcmQsIHdlaWdodCxcbiAgICAgICAgICAgICAgICAgKG1heFJhZGl1cyAtIHIpLCBneHlbMl0sIHJvdGF0ZURlZywgYXR0cmlidXRlcyk7XG5cbiAgICAgICAgLy8gTWFyayB0aGUgc3BhY2VzIG9uIHRoZSBncmlkIGFzIGZpbGxlZFxuICAgICAgICB1cGRhdGVHcmlkKGd4LCBneSwgZ3csIGdoLCBpbmZvLCBpdGVtKTtcblxuICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBzbyBzb21lKCkgd2lsbCBzdG9wIGFuZCBhbHNvIHJldHVybiB0cnVlLlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG5cbiAgICAgIHdoaWxlIChyLS0pIHtcbiAgICAgICAgdmFyIHBvaW50cyA9IGdldFBvaW50c0F0UmFkaXVzKG1heFJhZGl1cyAtIHIpO1xuXG4gICAgICAgIGlmIChzZXR0aW5ncy5zaHVmZmxlKSB7XG4gICAgICAgICAgcG9pbnRzID0gW10uY29uY2F0KHBvaW50cyk7XG4gICAgICAgICAgc2h1ZmZsZUFycmF5KHBvaW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcnkgdG8gZml0IHRoZSB3b3JkcyBieSBsb29raW5nIGF0IGVhY2ggcG9pbnQuXG4gICAgICAgIC8vIGFycmF5LnNvbWUoKSB3aWxsIHN0b3AgYW5kIHJldHVybiB0cnVlXG4gICAgICAgIC8vIHdoZW4gcHV0V29yZEF0UG9pbnQoKSByZXR1cm5zIHRydWUuXG4gICAgICAgIC8vIElmIGFsbCB0aGUgcG9pbnRzIHJldHVybnMgZmFsc2UsIGFycmF5LnNvbWUoKSByZXR1cm5zIGZhbHNlLlxuICAgICAgICB2YXIgZHJhd24gPSBwb2ludHMuc29tZSh0cnlUb1B1dFdvcmRBdFBvaW50KTtcblxuICAgICAgICBpZiAoZHJhd24pIHtcbiAgICAgICAgICAvLyBsZWF2ZSBwdXRXb3JkKCkgYW5kIHJldHVybiB0cnVlXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIHdlIHRyaWVkIGFsbCBkaXN0YW5jZXMgYnV0IHRleHQgd29uJ3QgZml0LCByZXR1cm4gZmFsc2VcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyogU2VuZCBET00gZXZlbnQgdG8gYWxsIGVsZW1lbnRzLiBXaWxsIHN0b3Agc2VuZGluZyBldmVudCBhbmQgcmV0dXJuXG4gICAgICAgaWYgdGhlIHByZXZpb3VzIG9uZSBpcyBjYW5jZWxlZCAoZm9yIGNhbmNlbGFibGUgZXZlbnRzKS4gKi9cbiAgICB2YXIgc2VuZEV2ZW50ID0gZnVuY3Rpb24gc2VuZEV2ZW50KHR5cGUsIGNhbmNlbGFibGUsIGRldGFpbCkge1xuICAgICAgaWYgKGNhbmNlbGFibGUpIHtcbiAgICAgICAgcmV0dXJuICFlbGVtZW50cy5zb21lKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQodHlwZSwgdHJ1ZSwgY2FuY2VsYWJsZSwgZGV0YWlsIHx8IHt9KTtcbiAgICAgICAgICByZXR1cm4gIWVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgICAgICAgIGV2dC5pbml0Q3VzdG9tRXZlbnQodHlwZSwgdHJ1ZSwgY2FuY2VsYWJsZSwgZGV0YWlsIHx8IHt9KTtcbiAgICAgICAgICBlbC5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKiBTdGFydCBkcmF3aW5nIG9uIGEgY2FudmFzICovXG4gICAgdmFyIHN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAvLyBGb3IgZGltZW5zaW9ucywgY2xlYXJDYW52YXMgZXRjLixcbiAgICAgIC8vIHdlIG9ubHkgY2FyZSBhYm91dCB0aGUgZmlyc3QgZWxlbWVudC5cbiAgICAgIHZhciBjYW52YXMgPSBlbGVtZW50c1swXTtcblxuICAgICAgaWYgKGNhbnZhcy5nZXRDb250ZXh0KSB7XG4gICAgICAgIG5neCA9IE1hdGguZmxvb3IoY2FudmFzLndpZHRoIC8gZyk7XG4gICAgICAgIG5neSA9IE1hdGguZmxvb3IoY2FudmFzLmhlaWdodCAvIGcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIG5neCA9IE1hdGguZmxvb3IocmVjdC53aWR0aCAvIGcpO1xuICAgICAgICBuZ3kgPSBNYXRoLmZsb29yKHJlY3QuaGVpZ2h0IC8gZyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlbmRpbmcgYSB3b3JkY2xvdWRzdGFydCBldmVudCB3aGljaCBjYXVzZSB0aGUgcHJldmlvdXMgbG9vcCB0byBzdG9wLlxuICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGUgZXZlbnQgaXMgY2FuY2VsZWQuXG4gICAgICBpZiAoIXNlbmRFdmVudCgnd29yZGNsb3Vkc3RhcnQnLCB0cnVlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgY2VudGVyIG9mIHRoZSB3b3JkIGNsb3VkXG4gICAgICBjZW50ZXIgPSAoc2V0dGluZ3Mub3JpZ2luKSA/XG4gICAgICAgIFtzZXR0aW5ncy5vcmlnaW5bMF0vZywgc2V0dGluZ3Mub3JpZ2luWzFdL2ddIDpcbiAgICAgICAgW25neCAvIDIsIG5neSAvIDJdO1xuXG4gICAgICAvLyBNYXhpdW0gcmFkaXVzIHRvIGxvb2sgZm9yIHNwYWNlXG4gICAgICBtYXhSYWRpdXMgPSBNYXRoLmZsb29yKE1hdGguc3FydChuZ3ggKiBuZ3ggKyBuZ3kgKiBuZ3kpKTtcblxuICAgICAgLyogQ2xlYXIgdGhlIGNhbnZhcyBvbmx5IGlmIHRoZSBjbGVhckNhbnZhcyBpcyBzZXQsXG4gICAgICAgICBpZiBub3QsIHVwZGF0ZSB0aGUgZ3JpZCB0byB0aGUgY3VycmVudCBjYW52YXMgc3RhdGUgKi9cbiAgICAgIGdyaWQgPSBbXTtcblxuICAgICAgdmFyIGd4LCBneSwgaTtcbiAgICAgIGlmICghY2FudmFzLmdldENvbnRleHQgfHwgc2V0dGluZ3MuY2xlYXJDYW52YXMpIHtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgICAgICAgIGlmIChlbC5nZXRDb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gZWwuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBzZXR0aW5ncy5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIG5neCAqIChnICsgMSksIG5neSAqIChnICsgMSkpO1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIG5neCAqIChnICsgMSksIG5neSAqIChnICsgMSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2V0dGluZ3MuYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLyogZmlsbCB0aGUgZ3JpZCB3aXRoIGVtcHR5IHN0YXRlICovXG4gICAgICAgIGd4ID0gbmd4O1xuICAgICAgICB3aGlsZSAoZ3gtLSkge1xuICAgICAgICAgIGdyaWRbZ3hdID0gW107XG4gICAgICAgICAgZ3kgPSBuZ3k7XG4gICAgICAgICAgd2hpbGUgKGd5LS0pIHtcbiAgICAgICAgICAgIGdyaWRbZ3hdW2d5XSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBEZXRlcm1pbmUgYmdQaXhlbCBieSBjcmVhdGluZ1xuICAgICAgICAgICBhbm90aGVyIGNhbnZhcyBhbmQgZmlsbCB0aGUgc3BlY2lmaWVkIGJhY2tncm91bmQgY29sb3IuICovXG4gICAgICAgIHZhciBiY3R4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICBiY3R4LmZpbGxTdHlsZSA9IHNldHRpbmdzLmJhY2tncm91bmRDb2xvcjtcbiAgICAgICAgYmN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgICAgICAgdmFyIGJnUGl4ZWwgPSBiY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuXG4gICAgICAgIC8qIFJlYWQgYmFjayB0aGUgcGl4ZWxzIG9mIHRoZSBjYW52YXMgd2UgZ290IHRvIHRlbGwgd2hpY2ggcGFydCBvZiB0aGVcbiAgICAgICAgICAgY2FudmFzIGlzIGVtcHR5LlxuICAgICAgICAgICAobm8gY2xlYXJDYW52YXMgb25seSB3b3JrcyB3aXRoIGEgY2FudmFzLCBub3QgZGl2cykgKi9cbiAgICAgICAgdmFyIGltYWdlRGF0YSA9XG4gICAgICAgICAgY2FudmFzLmdldENvbnRleHQoJzJkJykuZ2V0SW1hZ2VEYXRhKDAsIDAsIG5neCAqIGcsIG5neSAqIGcpLmRhdGE7XG5cbiAgICAgICAgZ3ggPSBuZ3g7XG4gICAgICAgIHZhciB4LCB5O1xuICAgICAgICB3aGlsZSAoZ3gtLSkge1xuICAgICAgICAgIGdyaWRbZ3hdID0gW107XG4gICAgICAgICAgZ3kgPSBuZ3k7XG4gICAgICAgICAgd2hpbGUgKGd5LS0pIHtcbiAgICAgICAgICAgIHkgPSBnO1xuICAgICAgICAgICAgc2luZ2xlR3JpZExvb3A6IHdoaWxlICh5LS0pIHtcbiAgICAgICAgICAgICAgeCA9IGc7XG4gICAgICAgICAgICAgIHdoaWxlICh4LS0pIHtcbiAgICAgICAgICAgICAgICBpID0gNDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VEYXRhWygoZ3kgKiBnICsgeSkgKiBuZ3ggKiBnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChneCAqIGcgKyB4KSkgKiA0ICsgaV0gIT09IGJnUGl4ZWxbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZ3JpZFtneF1bZ3ldID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrIHNpbmdsZUdyaWRMb29wO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdyaWRbZ3hdW2d5XSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgZ3JpZFtneF1bZ3ldID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpbWFnZURhdGEgPSBiY3R4ID0gYmdQaXhlbCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLy8gZmlsbCB0aGUgaW5mb0dyaWQgd2l0aCBlbXB0eSBzdGF0ZSBpZiB3ZSBuZWVkIGl0XG4gICAgICBpZiAoc2V0dGluZ3MuaG92ZXIgfHwgc2V0dGluZ3MuY2xpY2spIHtcblxuICAgICAgICBpbnRlcmFjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgLyogZmlsbCB0aGUgZ3JpZCB3aXRoIGVtcHR5IHN0YXRlICovXG4gICAgICAgIGd4ID0gbmd4ICsgMTtcbiAgICAgICAgd2hpbGUgKGd4LS0pIHtcbiAgICAgICAgICBpbmZvR3JpZFtneF0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXR0aW5ncy5ob3Zlcikge1xuICAgICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB3b3JkY2xvdWRob3Zlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2V0dGluZ3MuY2xpY2spIHtcbiAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB3b3JkY2xvdWRjbGljayk7XG4gICAgICAgIH1cblxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignd29yZGNsb3Vkc3RhcnQnLCBmdW5jdGlvbiBzdG9wSW50ZXJhY3Rpb24oKSB7XG4gICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dvcmRjbG91ZHN0YXJ0Jywgc3RvcEludGVyYWN0aW9uKTtcblxuICAgICAgICAgIGNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB3b3JkY2xvdWRob3Zlcik7XG4gICAgICAgICAgY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgd29yZGNsb3VkY2xpY2spO1xuICAgICAgICAgIGhvdmVyZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpID0gMDtcbiAgICAgIHZhciBsb29waW5nRnVuY3Rpb24sIHN0b3BwaW5nRnVuY3Rpb247XG4gICAgICBpZiAoc2V0dGluZ3Mud2FpdCAhPT0gMCkge1xuICAgICAgICBsb29waW5nRnVuY3Rpb24gPSB3aW5kb3cuc2V0VGltZW91dDtcbiAgICAgICAgc3RvcHBpbmdGdW5jdGlvbiA9IHdpbmRvdy5jbGVhclRpbWVvdXQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb29waW5nRnVuY3Rpb24gPSB3aW5kb3cuc2V0SW1tZWRpYXRlO1xuICAgICAgICBzdG9wcGluZ0Z1bmN0aW9uID0gd2luZG93LmNsZWFySW1tZWRpYXRlO1xuICAgICAgfVxuXG4gICAgICB2YXIgYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciByZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGFub3RoZXJXb3JkQ2xvdWRTdGFydCA9IGZ1bmN0aW9uIGFub3RoZXJXb3JkQ2xvdWRTdGFydCgpIHtcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcignd29yZGNsb3Vkc3RhcnQnLCBhbm90aGVyV29yZENsb3VkU3RhcnQpO1xuICAgICAgICBzdG9wcGluZ0Z1bmN0aW9uKHRpbWVyKTtcbiAgICAgIH07XG5cbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ3dvcmRjbG91ZHN0YXJ0JywgYW5vdGhlcldvcmRDbG91ZFN0YXJ0KTtcblxuICAgICAgdmFyIHRpbWVyID0gbG9vcGluZ0Z1bmN0aW9uKGZ1bmN0aW9uIGxvb3AoKSB7XG4gICAgICAgIGlmIChpID49IHNldHRpbmdzLmxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgc3RvcHBpbmdGdW5jdGlvbih0aW1lcik7XG4gICAgICAgICAgc2VuZEV2ZW50KCd3b3JkY2xvdWRzdG9wJywgZmFsc2UpO1xuICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoJ3dvcmRjbG91ZHN0YXJ0JywgYW5vdGhlcldvcmRDbG91ZFN0YXJ0KTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlc2NhcGVUaW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIGRyYXduID0gcHV0V29yZChzZXR0aW5ncy5saXN0W2ldKTtcbiAgICAgICAgdmFyIGNhbmNlbGVkID0gIXNlbmRFdmVudCgnd29yZGNsb3VkZHJhd24nLCB0cnVlLCB7XG4gICAgICAgICAgaXRlbTogc2V0dGluZ3MubGlzdFtpXSwgZHJhd246IGRyYXduIH0pO1xuICAgICAgICBpZiAoZXhjZWVkVGltZSgpIHx8IGNhbmNlbGVkKSB7XG4gICAgICAgICAgc3RvcHBpbmdGdW5jdGlvbih0aW1lcik7XG4gICAgICAgICAgc2V0dGluZ3MuYWJvcnQoKTtcbiAgICAgICAgICBzZW5kRXZlbnQoJ3dvcmRjbG91ZGFib3J0JywgZmFsc2UpO1xuICAgICAgICAgIHNlbmRFdmVudCgnd29yZGNsb3Vkc3RvcCcsIGZhbHNlKTtcbiAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCd3b3JkY2xvdWRzdGFydCcsIGFub3RoZXJXb3JkQ2xvdWRTdGFydCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICAgICAgdGltZXIgPSBsb29waW5nRnVuY3Rpb24obG9vcCwgc2V0dGluZ3Mud2FpdCk7XG4gICAgICB9LCBzZXR0aW5ncy53YWl0KTtcbiAgICB9O1xuXG4gICAgLy8gQWxsIHNldCwgc3RhcnQgdGhlIGRyYXdpbmdcbiAgICBzdGFydCgpO1xuICB9O1xuXG4gIFdvcmRDbG91ZC5pc1N1cHBvcnRlZCA9IGlzU3VwcG9ydGVkO1xuICBXb3JkQ2xvdWQubWluaXVtRm9udFNpemUgPSBtaW5pdW1Gb250U2l6ZTtcblxuICAvLyBFeHBvc2UgdGhlIGxpYnJhcnkgYXMgYW4gQU1EIG1vZHVsZVxuICBpZiAodHlwZW9mIGdsb2JhbC5kZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZ2xvYmFsLmRlZmluZS5hbWQpIHtcbiAgICBnbG9iYWwuZGVmaW5lKCd3b3JkY2xvdWQnLCBbXSwgZnVuY3Rpb24oKSB7IHJldHVybiBXb3JkQ2xvdWQ7IH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwubW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWwubW9kdWxlLmV4cG9ydHMpIHtcbiAgICBnbG9iYWwubW9kdWxlLmV4cG9ydHMgPSBXb3JkQ2xvdWQ7XG4gIH0gZWxzZSB7XG4gICAgZ2xvYmFsLldvcmRDbG91ZCA9IFdvcmRDbG91ZDtcbiAgfVxuXG59KSh3aW5kb3cpO1xuIl19
